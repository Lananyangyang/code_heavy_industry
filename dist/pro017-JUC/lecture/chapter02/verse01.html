<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码重工</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="代码重工">
    
    <link rel="preload" href="/assets/css/0.styles.64f7ac41.css" as="style"><link rel="preload" href="/assets/js/app.159950f8.js" as="script"><link rel="preload" href="/assets/js/3.3b545592.js" as="script"><link rel="preload" href="/assets/js/88.26ec1911.js" as="script"><link rel="prefetch" href="/assets/js/10.a50c6851.js"><link rel="prefetch" href="/assets/js/100.afddf729.js"><link rel="prefetch" href="/assets/js/101.ad132181.js"><link rel="prefetch" href="/assets/js/102.c7cb4882.js"><link rel="prefetch" href="/assets/js/103.4a928fc0.js"><link rel="prefetch" href="/assets/js/104.290d7c4e.js"><link rel="prefetch" href="/assets/js/105.2961390d.js"><link rel="prefetch" href="/assets/js/106.45f41919.js"><link rel="prefetch" href="/assets/js/107.139d1c8f.js"><link rel="prefetch" href="/assets/js/108.514eb842.js"><link rel="prefetch" href="/assets/js/109.b4dc84f4.js"><link rel="prefetch" href="/assets/js/11.1cafacb4.js"><link rel="prefetch" href="/assets/js/110.c7b713d6.js"><link rel="prefetch" href="/assets/js/111.4f9d4dfd.js"><link rel="prefetch" href="/assets/js/112.a36f674e.js"><link rel="prefetch" href="/assets/js/113.fc974564.js"><link rel="prefetch" href="/assets/js/114.92e5cc71.js"><link rel="prefetch" href="/assets/js/115.45db6909.js"><link rel="prefetch" href="/assets/js/116.29c2d5f1.js"><link rel="prefetch" href="/assets/js/117.53f05c9f.js"><link rel="prefetch" href="/assets/js/118.8b863262.js"><link rel="prefetch" href="/assets/js/119.0edf3f7c.js"><link rel="prefetch" href="/assets/js/12.2953d647.js"><link rel="prefetch" href="/assets/js/120.8db26f1c.js"><link rel="prefetch" href="/assets/js/121.d6d7a7b0.js"><link rel="prefetch" href="/assets/js/122.5b9f68b3.js"><link rel="prefetch" href="/assets/js/123.2740ab9d.js"><link rel="prefetch" href="/assets/js/124.b7e1434b.js"><link rel="prefetch" href="/assets/js/125.03121c1b.js"><link rel="prefetch" href="/assets/js/126.f4273ace.js"><link rel="prefetch" href="/assets/js/127.b8ccf234.js"><link rel="prefetch" href="/assets/js/128.12e05213.js"><link rel="prefetch" href="/assets/js/129.dfb829fb.js"><link rel="prefetch" href="/assets/js/13.b15e7b4a.js"><link rel="prefetch" href="/assets/js/130.15d34a15.js"><link rel="prefetch" href="/assets/js/131.fae6a19c.js"><link rel="prefetch" href="/assets/js/132.8c62ad48.js"><link rel="prefetch" href="/assets/js/133.77023810.js"><link rel="prefetch" href="/assets/js/134.51ff8c8f.js"><link rel="prefetch" href="/assets/js/135.9be1b482.js"><link rel="prefetch" href="/assets/js/136.21007e80.js"><link rel="prefetch" href="/assets/js/137.bd26c12c.js"><link rel="prefetch" href="/assets/js/138.35b73d17.js"><link rel="prefetch" href="/assets/js/139.dff7c0e7.js"><link rel="prefetch" href="/assets/js/14.4e6fa7b0.js"><link rel="prefetch" href="/assets/js/140.0b3c6c40.js"><link rel="prefetch" href="/assets/js/141.988240ef.js"><link rel="prefetch" href="/assets/js/142.fcdc8826.js"><link rel="prefetch" href="/assets/js/143.9ab936e9.js"><link rel="prefetch" href="/assets/js/144.4f008a73.js"><link rel="prefetch" href="/assets/js/145.bb464124.js"><link rel="prefetch" href="/assets/js/146.d658aaf7.js"><link rel="prefetch" href="/assets/js/147.be9e7abc.js"><link rel="prefetch" href="/assets/js/148.b78e8cb6.js"><link rel="prefetch" href="/assets/js/149.363989ef.js"><link rel="prefetch" href="/assets/js/15.686c2d49.js"><link rel="prefetch" href="/assets/js/150.8539878c.js"><link rel="prefetch" href="/assets/js/151.6c3f78a8.js"><link rel="prefetch" href="/assets/js/152.c6d6cc90.js"><link rel="prefetch" href="/assets/js/153.dbc009c5.js"><link rel="prefetch" href="/assets/js/154.40fce740.js"><link rel="prefetch" href="/assets/js/155.a0e04130.js"><link rel="prefetch" href="/assets/js/156.3133b7c3.js"><link rel="prefetch" href="/assets/js/157.53394694.js"><link rel="prefetch" href="/assets/js/158.713d4b9b.js"><link rel="prefetch" href="/assets/js/159.0891e3b1.js"><link rel="prefetch" href="/assets/js/16.40dcf8a6.js"><link rel="prefetch" href="/assets/js/160.6c011808.js"><link rel="prefetch" href="/assets/js/161.46b3889c.js"><link rel="prefetch" href="/assets/js/162.0416de8c.js"><link rel="prefetch" href="/assets/js/163.1555d40d.js"><link rel="prefetch" href="/assets/js/164.41f0d8bc.js"><link rel="prefetch" href="/assets/js/165.a76abd7d.js"><link rel="prefetch" href="/assets/js/166.05a657dd.js"><link rel="prefetch" href="/assets/js/167.f59915d3.js"><link rel="prefetch" href="/assets/js/168.4a308356.js"><link rel="prefetch" href="/assets/js/169.f5cee9c1.js"><link rel="prefetch" href="/assets/js/17.6a51674d.js"><link rel="prefetch" href="/assets/js/170.f307fbc7.js"><link rel="prefetch" href="/assets/js/171.77a28087.js"><link rel="prefetch" href="/assets/js/172.0ee406ea.js"><link rel="prefetch" href="/assets/js/173.9892746c.js"><link rel="prefetch" href="/assets/js/174.aff68e36.js"><link rel="prefetch" href="/assets/js/175.17fc0ff8.js"><link rel="prefetch" href="/assets/js/176.e8615358.js"><link rel="prefetch" href="/assets/js/177.5477db9a.js"><link rel="prefetch" href="/assets/js/178.fd6b9ea6.js"><link rel="prefetch" href="/assets/js/179.95658d16.js"><link rel="prefetch" href="/assets/js/18.eafd74b2.js"><link rel="prefetch" href="/assets/js/180.e7ae8d05.js"><link rel="prefetch" href="/assets/js/181.da936c77.js"><link rel="prefetch" href="/assets/js/182.13bd2427.js"><link rel="prefetch" href="/assets/js/183.f8f9635e.js"><link rel="prefetch" href="/assets/js/184.6ce91551.js"><link rel="prefetch" href="/assets/js/185.9153d3db.js"><link rel="prefetch" href="/assets/js/186.13a517bc.js"><link rel="prefetch" href="/assets/js/187.f0a43906.js"><link rel="prefetch" href="/assets/js/188.3760ffb2.js"><link rel="prefetch" href="/assets/js/189.e06cd825.js"><link rel="prefetch" href="/assets/js/19.601931c9.js"><link rel="prefetch" href="/assets/js/190.22ad9ad8.js"><link rel="prefetch" href="/assets/js/191.7e27f280.js"><link rel="prefetch" href="/assets/js/192.33d4a997.js"><link rel="prefetch" href="/assets/js/193.033e9b0e.js"><link rel="prefetch" href="/assets/js/194.b6457ae7.js"><link rel="prefetch" href="/assets/js/195.2c09ed05.js"><link rel="prefetch" href="/assets/js/196.d695a5ee.js"><link rel="prefetch" href="/assets/js/197.d6511283.js"><link rel="prefetch" href="/assets/js/198.aa082f00.js"><link rel="prefetch" href="/assets/js/199.a9f67f9c.js"><link rel="prefetch" href="/assets/js/2.409c4811.js"><link rel="prefetch" href="/assets/js/20.f6b26dff.js"><link rel="prefetch" href="/assets/js/200.d8c29663.js"><link rel="prefetch" href="/assets/js/201.aca73ddc.js"><link rel="prefetch" href="/assets/js/202.a5cd62aa.js"><link rel="prefetch" href="/assets/js/203.e223768b.js"><link rel="prefetch" href="/assets/js/204.fe1896af.js"><link rel="prefetch" href="/assets/js/205.d63593ab.js"><link rel="prefetch" href="/assets/js/206.80dfc212.js"><link rel="prefetch" href="/assets/js/207.5329086a.js"><link rel="prefetch" href="/assets/js/208.ede0404c.js"><link rel="prefetch" href="/assets/js/209.656b9d98.js"><link rel="prefetch" href="/assets/js/21.5fecece4.js"><link rel="prefetch" href="/assets/js/210.f25cf8ed.js"><link rel="prefetch" href="/assets/js/211.997698a0.js"><link rel="prefetch" href="/assets/js/212.32393f96.js"><link rel="prefetch" href="/assets/js/213.f2b40128.js"><link rel="prefetch" href="/assets/js/214.f4834943.js"><link rel="prefetch" href="/assets/js/215.a5a7f13b.js"><link rel="prefetch" href="/assets/js/216.0bed6333.js"><link rel="prefetch" href="/assets/js/217.c77a10a8.js"><link rel="prefetch" href="/assets/js/218.0b1c1d17.js"><link rel="prefetch" href="/assets/js/219.ebbe8f35.js"><link rel="prefetch" href="/assets/js/22.41c88028.js"><link rel="prefetch" href="/assets/js/220.e7468651.js"><link rel="prefetch" href="/assets/js/221.3315c250.js"><link rel="prefetch" href="/assets/js/222.35ff3e2c.js"><link rel="prefetch" href="/assets/js/223.6dac2197.js"><link rel="prefetch" href="/assets/js/224.5fb6e4e3.js"><link rel="prefetch" href="/assets/js/225.79dbe0d5.js"><link rel="prefetch" href="/assets/js/226.f9a6bce0.js"><link rel="prefetch" href="/assets/js/227.eb75c57f.js"><link rel="prefetch" href="/assets/js/228.392a74fb.js"><link rel="prefetch" href="/assets/js/229.61662174.js"><link rel="prefetch" href="/assets/js/23.2fe080f4.js"><link rel="prefetch" href="/assets/js/230.6c2fdb17.js"><link rel="prefetch" href="/assets/js/231.3c78167b.js"><link rel="prefetch" href="/assets/js/232.015f356b.js"><link rel="prefetch" href="/assets/js/233.c773f4c1.js"><link rel="prefetch" href="/assets/js/234.bbec6006.js"><link rel="prefetch" href="/assets/js/235.44d957d1.js"><link rel="prefetch" href="/assets/js/236.fbc43adc.js"><link rel="prefetch" href="/assets/js/237.61261a8c.js"><link rel="prefetch" href="/assets/js/238.3e4f8eed.js"><link rel="prefetch" href="/assets/js/239.91b305a5.js"><link rel="prefetch" href="/assets/js/24.60e27e0a.js"><link rel="prefetch" href="/assets/js/240.88174316.js"><link rel="prefetch" href="/assets/js/241.3117dc42.js"><link rel="prefetch" href="/assets/js/242.d1329575.js"><link rel="prefetch" href="/assets/js/243.1ef46f91.js"><link rel="prefetch" href="/assets/js/244.0864a384.js"><link rel="prefetch" href="/assets/js/245.b6566553.js"><link rel="prefetch" href="/assets/js/246.3feeda6e.js"><link rel="prefetch" href="/assets/js/247.36d56119.js"><link rel="prefetch" href="/assets/js/248.ac58b445.js"><link rel="prefetch" href="/assets/js/249.593ee1cd.js"><link rel="prefetch" href="/assets/js/25.fe5ae7ba.js"><link rel="prefetch" href="/assets/js/250.47df3f91.js"><link rel="prefetch" href="/assets/js/251.78c968ba.js"><link rel="prefetch" href="/assets/js/252.b057eb12.js"><link rel="prefetch" href="/assets/js/253.6d313906.js"><link rel="prefetch" href="/assets/js/254.f9db9439.js"><link rel="prefetch" href="/assets/js/255.75db843c.js"><link rel="prefetch" href="/assets/js/256.d80cabb4.js"><link rel="prefetch" href="/assets/js/257.5ddf83ce.js"><link rel="prefetch" href="/assets/js/258.a77d7b9b.js"><link rel="prefetch" href="/assets/js/259.ba05567f.js"><link rel="prefetch" href="/assets/js/26.8be2ca65.js"><link rel="prefetch" href="/assets/js/260.1d39c803.js"><link rel="prefetch" href="/assets/js/261.bb059693.js"><link rel="prefetch" href="/assets/js/262.58c854e4.js"><link rel="prefetch" href="/assets/js/263.ddf06f53.js"><link rel="prefetch" href="/assets/js/264.6c35e5f7.js"><link rel="prefetch" href="/assets/js/265.fe9f8c52.js"><link rel="prefetch" href="/assets/js/266.b80eb01a.js"><link rel="prefetch" href="/assets/js/267.88b3ddab.js"><link rel="prefetch" href="/assets/js/268.d49404c8.js"><link rel="prefetch" href="/assets/js/269.fd3eb16e.js"><link rel="prefetch" href="/assets/js/27.b167322e.js"><link rel="prefetch" href="/assets/js/270.6574e13b.js"><link rel="prefetch" href="/assets/js/271.7a1a9aea.js"><link rel="prefetch" href="/assets/js/272.078ad61c.js"><link rel="prefetch" href="/assets/js/273.1b403500.js"><link rel="prefetch" href="/assets/js/274.e88ad495.js"><link rel="prefetch" href="/assets/js/275.0e53251b.js"><link rel="prefetch" href="/assets/js/276.434e4ad9.js"><link rel="prefetch" href="/assets/js/277.aaab97b9.js"><link rel="prefetch" href="/assets/js/278.8dc1ceea.js"><link rel="prefetch" href="/assets/js/279.ac5beaec.js"><link rel="prefetch" href="/assets/js/28.f4e0b220.js"><link rel="prefetch" href="/assets/js/280.b623c059.js"><link rel="prefetch" href="/assets/js/281.486fa10a.js"><link rel="prefetch" href="/assets/js/282.de16e7be.js"><link rel="prefetch" href="/assets/js/283.8dc0df8c.js"><link rel="prefetch" href="/assets/js/284.c1b66d80.js"><link rel="prefetch" href="/assets/js/285.d7d5d962.js"><link rel="prefetch" href="/assets/js/286.778faa2c.js"><link rel="prefetch" href="/assets/js/287.2d4acf2a.js"><link rel="prefetch" href="/assets/js/288.5e7ae028.js"><link rel="prefetch" href="/assets/js/289.0070a902.js"><link rel="prefetch" href="/assets/js/29.7a1fdfd0.js"><link rel="prefetch" href="/assets/js/290.0fbc88bb.js"><link rel="prefetch" href="/assets/js/291.191b82d5.js"><link rel="prefetch" href="/assets/js/292.5b8450ed.js"><link rel="prefetch" href="/assets/js/293.4f8e15c3.js"><link rel="prefetch" href="/assets/js/294.62899d6b.js"><link rel="prefetch" href="/assets/js/295.756a3fe4.js"><link rel="prefetch" href="/assets/js/296.d18611b8.js"><link rel="prefetch" href="/assets/js/297.3675ffc2.js"><link rel="prefetch" href="/assets/js/298.6922f511.js"><link rel="prefetch" href="/assets/js/299.04e8ad56.js"><link rel="prefetch" href="/assets/js/30.389b72ac.js"><link rel="prefetch" href="/assets/js/300.21b5bbf9.js"><link rel="prefetch" href="/assets/js/301.acfdfdda.js"><link rel="prefetch" href="/assets/js/302.73f260db.js"><link rel="prefetch" href="/assets/js/303.e4dc7896.js"><link rel="prefetch" href="/assets/js/304.506473fe.js"><link rel="prefetch" href="/assets/js/305.c03927be.js"><link rel="prefetch" href="/assets/js/306.b04d7d52.js"><link rel="prefetch" href="/assets/js/307.6e9ec9f1.js"><link rel="prefetch" href="/assets/js/308.b3af2c1d.js"><link rel="prefetch" href="/assets/js/309.14e44d27.js"><link rel="prefetch" href="/assets/js/31.e148e918.js"><link rel="prefetch" href="/assets/js/310.3bb9f129.js"><link rel="prefetch" href="/assets/js/311.e6779c74.js"><link rel="prefetch" href="/assets/js/312.54271902.js"><link rel="prefetch" href="/assets/js/313.afeebc35.js"><link rel="prefetch" href="/assets/js/314.58b9bda3.js"><link rel="prefetch" href="/assets/js/315.f9010a69.js"><link rel="prefetch" href="/assets/js/316.389b5940.js"><link rel="prefetch" href="/assets/js/317.532f79f1.js"><link rel="prefetch" href="/assets/js/318.48933054.js"><link rel="prefetch" href="/assets/js/319.3f3dc327.js"><link rel="prefetch" href="/assets/js/32.ed6d415d.js"><link rel="prefetch" href="/assets/js/320.1e19b8e6.js"><link rel="prefetch" href="/assets/js/321.306590dd.js"><link rel="prefetch" href="/assets/js/322.3211199e.js"><link rel="prefetch" href="/assets/js/323.bbb4e508.js"><link rel="prefetch" href="/assets/js/324.8922468f.js"><link rel="prefetch" href="/assets/js/325.12f3d999.js"><link rel="prefetch" href="/assets/js/326.be70b23f.js"><link rel="prefetch" href="/assets/js/327.4f445676.js"><link rel="prefetch" href="/assets/js/328.f1a7060c.js"><link rel="prefetch" href="/assets/js/329.ae7d173e.js"><link rel="prefetch" href="/assets/js/33.1a2ecbe0.js"><link rel="prefetch" href="/assets/js/330.19a5ea9b.js"><link rel="prefetch" href="/assets/js/331.257d45c4.js"><link rel="prefetch" href="/assets/js/332.a976ef43.js"><link rel="prefetch" href="/assets/js/333.59c13e7b.js"><link rel="prefetch" href="/assets/js/334.1ea83e6d.js"><link rel="prefetch" href="/assets/js/335.6e947aca.js"><link rel="prefetch" href="/assets/js/336.8d4e1c0e.js"><link rel="prefetch" href="/assets/js/337.8aacead9.js"><link rel="prefetch" href="/assets/js/338.47492e5c.js"><link rel="prefetch" href="/assets/js/339.0694e7ff.js"><link rel="prefetch" href="/assets/js/34.a9f78451.js"><link rel="prefetch" href="/assets/js/340.6ceddd67.js"><link rel="prefetch" href="/assets/js/341.7456774f.js"><link rel="prefetch" href="/assets/js/342.cd6092f2.js"><link rel="prefetch" href="/assets/js/343.76e914ac.js"><link rel="prefetch" href="/assets/js/344.7f234ab5.js"><link rel="prefetch" href="/assets/js/345.54537711.js"><link rel="prefetch" href="/assets/js/346.9c277ff6.js"><link rel="prefetch" href="/assets/js/347.870cd271.js"><link rel="prefetch" href="/assets/js/348.2732ce38.js"><link rel="prefetch" href="/assets/js/349.01daaccf.js"><link rel="prefetch" href="/assets/js/35.a68a70a6.js"><link rel="prefetch" href="/assets/js/350.db5a9582.js"><link rel="prefetch" href="/assets/js/351.c51e3719.js"><link rel="prefetch" href="/assets/js/352.2fb2536a.js"><link rel="prefetch" href="/assets/js/353.47dbf6d7.js"><link rel="prefetch" href="/assets/js/354.e73f63a8.js"><link rel="prefetch" href="/assets/js/355.8bb582e3.js"><link rel="prefetch" href="/assets/js/356.39b180c2.js"><link rel="prefetch" href="/assets/js/357.a3cae13a.js"><link rel="prefetch" href="/assets/js/358.ba9007ae.js"><link rel="prefetch" href="/assets/js/359.04d2aadb.js"><link rel="prefetch" href="/assets/js/36.9f5ff54a.js"><link rel="prefetch" href="/assets/js/360.46eddd4b.js"><link rel="prefetch" href="/assets/js/361.80507f50.js"><link rel="prefetch" href="/assets/js/362.c2f9a241.js"><link rel="prefetch" href="/assets/js/363.4d995166.js"><link rel="prefetch" href="/assets/js/364.4f71177a.js"><link rel="prefetch" href="/assets/js/365.234d58e5.js"><link rel="prefetch" href="/assets/js/366.9d5aed89.js"><link rel="prefetch" href="/assets/js/367.79f6ccba.js"><link rel="prefetch" href="/assets/js/368.1a0016ac.js"><link rel="prefetch" href="/assets/js/369.dbcb49df.js"><link rel="prefetch" href="/assets/js/37.06b1e3d5.js"><link rel="prefetch" href="/assets/js/370.47e9c056.js"><link rel="prefetch" href="/assets/js/371.5bd1c916.js"><link rel="prefetch" href="/assets/js/372.afee59b5.js"><link rel="prefetch" href="/assets/js/373.c8d53708.js"><link rel="prefetch" href="/assets/js/374.f51cdaef.js"><link rel="prefetch" href="/assets/js/375.58d38d37.js"><link rel="prefetch" href="/assets/js/376.478ccb65.js"><link rel="prefetch" href="/assets/js/377.6173fad1.js"><link rel="prefetch" href="/assets/js/378.06870f00.js"><link rel="prefetch" href="/assets/js/379.48403ef1.js"><link rel="prefetch" href="/assets/js/38.cba784be.js"><link rel="prefetch" href="/assets/js/380.f9e99455.js"><link rel="prefetch" href="/assets/js/381.56ad666b.js"><link rel="prefetch" href="/assets/js/382.267e1488.js"><link rel="prefetch" href="/assets/js/383.d8ee8e65.js"><link rel="prefetch" href="/assets/js/384.07e38332.js"><link rel="prefetch" href="/assets/js/385.cf91ef08.js"><link rel="prefetch" href="/assets/js/386.b0997a62.js"><link rel="prefetch" href="/assets/js/387.2bbd4b23.js"><link rel="prefetch" href="/assets/js/388.868c4c14.js"><link rel="prefetch" href="/assets/js/389.82971a4b.js"><link rel="prefetch" href="/assets/js/39.b87b271b.js"><link rel="prefetch" href="/assets/js/390.621ea6da.js"><link rel="prefetch" href="/assets/js/391.2534eb89.js"><link rel="prefetch" href="/assets/js/392.029d5394.js"><link rel="prefetch" href="/assets/js/393.11c05260.js"><link rel="prefetch" href="/assets/js/394.7e29bd29.js"><link rel="prefetch" href="/assets/js/395.f3597e02.js"><link rel="prefetch" href="/assets/js/396.b857a170.js"><link rel="prefetch" href="/assets/js/397.ef259d46.js"><link rel="prefetch" href="/assets/js/398.3c891d6f.js"><link rel="prefetch" href="/assets/js/399.48d75bef.js"><link rel="prefetch" href="/assets/js/4.feb377f7.js"><link rel="prefetch" href="/assets/js/40.06a96abf.js"><link rel="prefetch" href="/assets/js/400.2bef2a08.js"><link rel="prefetch" href="/assets/js/401.67cc3f58.js"><link rel="prefetch" href="/assets/js/402.805397ea.js"><link rel="prefetch" href="/assets/js/403.b1b1dedf.js"><link rel="prefetch" href="/assets/js/404.fc398e95.js"><link rel="prefetch" href="/assets/js/405.d564dc03.js"><link rel="prefetch" href="/assets/js/406.9d5fd515.js"><link rel="prefetch" href="/assets/js/407.a0a9b525.js"><link rel="prefetch" href="/assets/js/408.1c7d6def.js"><link rel="prefetch" href="/assets/js/409.c628b981.js"><link rel="prefetch" href="/assets/js/41.81d65043.js"><link rel="prefetch" href="/assets/js/410.8621c20e.js"><link rel="prefetch" href="/assets/js/411.df4f2855.js"><link rel="prefetch" href="/assets/js/412.01eb8fe8.js"><link rel="prefetch" href="/assets/js/413.aa3676de.js"><link rel="prefetch" href="/assets/js/414.315d271c.js"><link rel="prefetch" href="/assets/js/415.f5411f95.js"><link rel="prefetch" href="/assets/js/416.3dd89d8e.js"><link rel="prefetch" href="/assets/js/417.1a8181dd.js"><link rel="prefetch" href="/assets/js/418.b2ad268d.js"><link rel="prefetch" href="/assets/js/419.0399156e.js"><link rel="prefetch" href="/assets/js/42.4b9d3451.js"><link rel="prefetch" href="/assets/js/420.f93f92d0.js"><link rel="prefetch" href="/assets/js/421.33524c38.js"><link rel="prefetch" href="/assets/js/422.09f49d53.js"><link rel="prefetch" href="/assets/js/423.baf1ebf8.js"><link rel="prefetch" href="/assets/js/424.b89b33ce.js"><link rel="prefetch" href="/assets/js/425.1d5534f3.js"><link rel="prefetch" href="/assets/js/426.6020d53c.js"><link rel="prefetch" href="/assets/js/427.cee309e3.js"><link rel="prefetch" href="/assets/js/428.2c2a45bf.js"><link rel="prefetch" href="/assets/js/429.055814f8.js"><link rel="prefetch" href="/assets/js/43.67ce9934.js"><link rel="prefetch" href="/assets/js/430.a7f82e74.js"><link rel="prefetch" href="/assets/js/431.7a57d9b4.js"><link rel="prefetch" href="/assets/js/432.42db5768.js"><link rel="prefetch" href="/assets/js/433.0fdfad9a.js"><link rel="prefetch" href="/assets/js/434.07443d28.js"><link rel="prefetch" href="/assets/js/435.9763e786.js"><link rel="prefetch" href="/assets/js/436.441adeda.js"><link rel="prefetch" href="/assets/js/437.7c3a572b.js"><link rel="prefetch" href="/assets/js/438.a0eca377.js"><link rel="prefetch" href="/assets/js/439.cafb0685.js"><link rel="prefetch" href="/assets/js/44.9b8fa089.js"><link rel="prefetch" href="/assets/js/440.ef545f0f.js"><link rel="prefetch" href="/assets/js/441.3ca942c6.js"><link rel="prefetch" href="/assets/js/442.98014727.js"><link rel="prefetch" href="/assets/js/443.fac6b602.js"><link rel="prefetch" href="/assets/js/444.59cc44a4.js"><link rel="prefetch" href="/assets/js/445.da382c35.js"><link rel="prefetch" href="/assets/js/446.7222b322.js"><link rel="prefetch" href="/assets/js/447.78aac3c6.js"><link rel="prefetch" href="/assets/js/448.b1bcc48e.js"><link rel="prefetch" href="/assets/js/449.47cc47bc.js"><link rel="prefetch" href="/assets/js/45.d26322b9.js"><link rel="prefetch" href="/assets/js/450.c51eeb3d.js"><link rel="prefetch" href="/assets/js/451.f3caf994.js"><link rel="prefetch" href="/assets/js/452.0df853a1.js"><link rel="prefetch" href="/assets/js/453.41380c17.js"><link rel="prefetch" href="/assets/js/454.581b78f5.js"><link rel="prefetch" href="/assets/js/455.456a898e.js"><link rel="prefetch" href="/assets/js/456.da365787.js"><link rel="prefetch" href="/assets/js/457.07ca137c.js"><link rel="prefetch" href="/assets/js/458.db736b62.js"><link rel="prefetch" href="/assets/js/459.b0fcc9c5.js"><link rel="prefetch" href="/assets/js/46.bfdea41c.js"><link rel="prefetch" href="/assets/js/460.71c2e672.js"><link rel="prefetch" href="/assets/js/461.7b6f39b2.js"><link rel="prefetch" href="/assets/js/462.c5788e8e.js"><link rel="prefetch" href="/assets/js/463.9ac4d59a.js"><link rel="prefetch" href="/assets/js/464.435f2acc.js"><link rel="prefetch" href="/assets/js/465.f8bfb40d.js"><link rel="prefetch" href="/assets/js/466.b77c71e9.js"><link rel="prefetch" href="/assets/js/467.174781f4.js"><link rel="prefetch" href="/assets/js/468.9dad209c.js"><link rel="prefetch" href="/assets/js/469.a8a017b4.js"><link rel="prefetch" href="/assets/js/47.62bf90bd.js"><link rel="prefetch" href="/assets/js/470.fbac99ec.js"><link rel="prefetch" href="/assets/js/471.2dea3c96.js"><link rel="prefetch" href="/assets/js/472.e00f5db3.js"><link rel="prefetch" href="/assets/js/473.4d3fb744.js"><link rel="prefetch" href="/assets/js/474.95931505.js"><link rel="prefetch" href="/assets/js/475.4ce384a5.js"><link rel="prefetch" href="/assets/js/476.00f46ed8.js"><link rel="prefetch" href="/assets/js/477.4e934e4d.js"><link rel="prefetch" href="/assets/js/478.e2302107.js"><link rel="prefetch" href="/assets/js/479.8c131a1c.js"><link rel="prefetch" href="/assets/js/48.215e1497.js"><link rel="prefetch" href="/assets/js/480.1102610f.js"><link rel="prefetch" href="/assets/js/481.eb31ae01.js"><link rel="prefetch" href="/assets/js/482.82ddd186.js"><link rel="prefetch" href="/assets/js/483.65d80371.js"><link rel="prefetch" href="/assets/js/484.180f9e1c.js"><link rel="prefetch" href="/assets/js/485.bb74eecf.js"><link rel="prefetch" href="/assets/js/486.2e72882a.js"><link rel="prefetch" href="/assets/js/487.90114521.js"><link rel="prefetch" href="/assets/js/488.7aebb01d.js"><link rel="prefetch" href="/assets/js/489.54ee4006.js"><link rel="prefetch" href="/assets/js/49.18ed5c59.js"><link rel="prefetch" href="/assets/js/490.72f38de8.js"><link rel="prefetch" href="/assets/js/491.c78c7e4a.js"><link rel="prefetch" href="/assets/js/492.a2f8dbd4.js"><link rel="prefetch" href="/assets/js/493.6c03a3ca.js"><link rel="prefetch" href="/assets/js/494.6ecb7af7.js"><link rel="prefetch" href="/assets/js/495.36665aa1.js"><link rel="prefetch" href="/assets/js/496.9c7c77df.js"><link rel="prefetch" href="/assets/js/497.3b829d58.js"><link rel="prefetch" href="/assets/js/498.a776d0e2.js"><link rel="prefetch" href="/assets/js/499.b41bc3a6.js"><link rel="prefetch" href="/assets/js/5.0b2bdcc6.js"><link rel="prefetch" href="/assets/js/50.556c7f45.js"><link rel="prefetch" href="/assets/js/500.928dadd8.js"><link rel="prefetch" href="/assets/js/501.223a1cc8.js"><link rel="prefetch" href="/assets/js/502.b3d10309.js"><link rel="prefetch" href="/assets/js/503.40b0b4ae.js"><link rel="prefetch" href="/assets/js/504.23fafec9.js"><link rel="prefetch" href="/assets/js/505.11e32bdc.js"><link rel="prefetch" href="/assets/js/506.d53fbac0.js"><link rel="prefetch" href="/assets/js/507.34650cd4.js"><link rel="prefetch" href="/assets/js/508.bf135793.js"><link rel="prefetch" href="/assets/js/509.0e141431.js"><link rel="prefetch" href="/assets/js/51.b926d159.js"><link rel="prefetch" href="/assets/js/510.04027927.js"><link rel="prefetch" href="/assets/js/511.894b85f0.js"><link rel="prefetch" href="/assets/js/512.be84c234.js"><link rel="prefetch" href="/assets/js/513.0bbb2e59.js"><link rel="prefetch" href="/assets/js/514.f23a5214.js"><link rel="prefetch" href="/assets/js/515.c08fa6d5.js"><link rel="prefetch" href="/assets/js/516.67049b89.js"><link rel="prefetch" href="/assets/js/517.39bd9195.js"><link rel="prefetch" href="/assets/js/518.1c9e6abc.js"><link rel="prefetch" href="/assets/js/519.6876d46f.js"><link rel="prefetch" href="/assets/js/52.46137ccc.js"><link rel="prefetch" href="/assets/js/520.aa0d4da4.js"><link rel="prefetch" href="/assets/js/521.bef16531.js"><link rel="prefetch" href="/assets/js/522.2b893868.js"><link rel="prefetch" href="/assets/js/523.ef65424b.js"><link rel="prefetch" href="/assets/js/524.9f2b0fa0.js"><link rel="prefetch" href="/assets/js/525.ebde8a2a.js"><link rel="prefetch" href="/assets/js/526.0d0779d6.js"><link rel="prefetch" href="/assets/js/527.e6f5c0c2.js"><link rel="prefetch" href="/assets/js/528.9f2a644e.js"><link rel="prefetch" href="/assets/js/529.91cc81aa.js"><link rel="prefetch" href="/assets/js/53.b9a827a3.js"><link rel="prefetch" href="/assets/js/530.cfef5054.js"><link rel="prefetch" href="/assets/js/531.2ee590e0.js"><link rel="prefetch" href="/assets/js/532.4ec6cdaa.js"><link rel="prefetch" href="/assets/js/533.49fbf4c7.js"><link rel="prefetch" href="/assets/js/534.80b34e8d.js"><link rel="prefetch" href="/assets/js/535.8ac6416c.js"><link rel="prefetch" href="/assets/js/536.bc40389e.js"><link rel="prefetch" href="/assets/js/537.44d89f39.js"><link rel="prefetch" href="/assets/js/538.4cb9052b.js"><link rel="prefetch" href="/assets/js/539.13319693.js"><link rel="prefetch" href="/assets/js/54.f51558da.js"><link rel="prefetch" href="/assets/js/540.757257f9.js"><link rel="prefetch" href="/assets/js/541.f6cf1df6.js"><link rel="prefetch" href="/assets/js/542.5657de51.js"><link rel="prefetch" href="/assets/js/543.be673c26.js"><link rel="prefetch" href="/assets/js/544.9a00230f.js"><link rel="prefetch" href="/assets/js/545.98987efa.js"><link rel="prefetch" href="/assets/js/546.435f7912.js"><link rel="prefetch" href="/assets/js/547.45531da9.js"><link rel="prefetch" href="/assets/js/548.c33771a6.js"><link rel="prefetch" href="/assets/js/549.5013afa9.js"><link rel="prefetch" href="/assets/js/55.b9e62d33.js"><link rel="prefetch" href="/assets/js/550.4a930e83.js"><link rel="prefetch" href="/assets/js/551.5ddc195d.js"><link rel="prefetch" href="/assets/js/552.ae8ce03e.js"><link rel="prefetch" href="/assets/js/553.1df969ae.js"><link rel="prefetch" href="/assets/js/554.584e5e4b.js"><link rel="prefetch" href="/assets/js/555.a4e8251a.js"><link rel="prefetch" href="/assets/js/556.48156390.js"><link rel="prefetch" href="/assets/js/557.0179110f.js"><link rel="prefetch" href="/assets/js/558.475a8bff.js"><link rel="prefetch" href="/assets/js/559.9e0b03e0.js"><link rel="prefetch" href="/assets/js/56.e58b546c.js"><link rel="prefetch" href="/assets/js/560.7666d136.js"><link rel="prefetch" href="/assets/js/561.fbef92e3.js"><link rel="prefetch" href="/assets/js/562.4d76c1c1.js"><link rel="prefetch" href="/assets/js/563.5967bbbb.js"><link rel="prefetch" href="/assets/js/564.4e725028.js"><link rel="prefetch" href="/assets/js/565.5397d654.js"><link rel="prefetch" href="/assets/js/566.8175b5e9.js"><link rel="prefetch" href="/assets/js/567.2fd204a1.js"><link rel="prefetch" href="/assets/js/568.abe509a2.js"><link rel="prefetch" href="/assets/js/569.1db46852.js"><link rel="prefetch" href="/assets/js/57.2e97403b.js"><link rel="prefetch" href="/assets/js/570.c37a4e1d.js"><link rel="prefetch" href="/assets/js/571.c94dbb87.js"><link rel="prefetch" href="/assets/js/572.3abb65cd.js"><link rel="prefetch" href="/assets/js/573.2b85a1ac.js"><link rel="prefetch" href="/assets/js/574.c9a90ee0.js"><link rel="prefetch" href="/assets/js/575.c60ba6bb.js"><link rel="prefetch" href="/assets/js/576.b9ca90a6.js"><link rel="prefetch" href="/assets/js/577.c276e493.js"><link rel="prefetch" href="/assets/js/578.af2ffd24.js"><link rel="prefetch" href="/assets/js/579.33cd38a7.js"><link rel="prefetch" href="/assets/js/58.76ac7180.js"><link rel="prefetch" href="/assets/js/580.94df6ce8.js"><link rel="prefetch" href="/assets/js/581.ff18bc65.js"><link rel="prefetch" href="/assets/js/582.0098d66e.js"><link rel="prefetch" href="/assets/js/583.f1989e41.js"><link rel="prefetch" href="/assets/js/584.6afc5da6.js"><link rel="prefetch" href="/assets/js/585.1cfbd4ed.js"><link rel="prefetch" href="/assets/js/586.07633f46.js"><link rel="prefetch" href="/assets/js/587.1d5f1cf6.js"><link rel="prefetch" href="/assets/js/588.dad48e69.js"><link rel="prefetch" href="/assets/js/589.c84951bc.js"><link rel="prefetch" href="/assets/js/59.41a1c61e.js"><link rel="prefetch" href="/assets/js/590.c62fee8a.js"><link rel="prefetch" href="/assets/js/591.3f421620.js"><link rel="prefetch" href="/assets/js/592.1b12f282.js"><link rel="prefetch" href="/assets/js/593.fcd0fdbd.js"><link rel="prefetch" href="/assets/js/594.805420f2.js"><link rel="prefetch" href="/assets/js/595.e498364b.js"><link rel="prefetch" href="/assets/js/596.8b27e03a.js"><link rel="prefetch" href="/assets/js/597.81f1460c.js"><link rel="prefetch" href="/assets/js/598.84a2ac60.js"><link rel="prefetch" href="/assets/js/599.ec183da0.js"><link rel="prefetch" href="/assets/js/6.e2b5429f.js"><link rel="prefetch" href="/assets/js/60.9012482e.js"><link rel="prefetch" href="/assets/js/600.0fd05372.js"><link rel="prefetch" href="/assets/js/601.f325ae6b.js"><link rel="prefetch" href="/assets/js/602.dc299c06.js"><link rel="prefetch" href="/assets/js/603.d710ddd3.js"><link rel="prefetch" href="/assets/js/604.b0eec039.js"><link rel="prefetch" href="/assets/js/605.de8c0569.js"><link rel="prefetch" href="/assets/js/606.da86abee.js"><link rel="prefetch" href="/assets/js/607.0f402a50.js"><link rel="prefetch" href="/assets/js/608.eb9e90a2.js"><link rel="prefetch" href="/assets/js/609.68c9357f.js"><link rel="prefetch" href="/assets/js/61.f2bef959.js"><link rel="prefetch" href="/assets/js/610.4a5d502f.js"><link rel="prefetch" href="/assets/js/611.40dbbfa9.js"><link rel="prefetch" href="/assets/js/612.d07b263c.js"><link rel="prefetch" href="/assets/js/613.3b399b00.js"><link rel="prefetch" href="/assets/js/614.d40b5f9a.js"><link rel="prefetch" href="/assets/js/615.e0384529.js"><link rel="prefetch" href="/assets/js/616.c6d35f58.js"><link rel="prefetch" href="/assets/js/617.027c9b8e.js"><link rel="prefetch" href="/assets/js/618.744dc055.js"><link rel="prefetch" href="/assets/js/619.a73b8ec5.js"><link rel="prefetch" href="/assets/js/62.aabf234a.js"><link rel="prefetch" href="/assets/js/620.3e38cdaa.js"><link rel="prefetch" href="/assets/js/621.10ceaeee.js"><link rel="prefetch" href="/assets/js/622.b4926aef.js"><link rel="prefetch" href="/assets/js/63.e3e8a10a.js"><link rel="prefetch" href="/assets/js/64.def37918.js"><link rel="prefetch" href="/assets/js/65.3f211cbc.js"><link rel="prefetch" href="/assets/js/66.1d5125cd.js"><link rel="prefetch" href="/assets/js/67.8927c30e.js"><link rel="prefetch" href="/assets/js/68.83e8fa8e.js"><link rel="prefetch" href="/assets/js/69.919ac0dd.js"><link rel="prefetch" href="/assets/js/7.aaa0813d.js"><link rel="prefetch" href="/assets/js/70.c1c81a6e.js"><link rel="prefetch" href="/assets/js/71.36a7ac94.js"><link rel="prefetch" href="/assets/js/72.a730f2fb.js"><link rel="prefetch" href="/assets/js/73.0fadd44f.js"><link rel="prefetch" href="/assets/js/74.2a45dbc3.js"><link rel="prefetch" href="/assets/js/75.6c4fa1a1.js"><link rel="prefetch" href="/assets/js/76.c0d5c494.js"><link rel="prefetch" href="/assets/js/77.0d170ad0.js"><link rel="prefetch" href="/assets/js/78.e236923f.js"><link rel="prefetch" href="/assets/js/79.a639beb3.js"><link rel="prefetch" href="/assets/js/8.213f4798.js"><link rel="prefetch" href="/assets/js/80.9e3993b7.js"><link rel="prefetch" href="/assets/js/81.e337550b.js"><link rel="prefetch" href="/assets/js/82.b39ec20a.js"><link rel="prefetch" href="/assets/js/83.60a214fa.js"><link rel="prefetch" href="/assets/js/84.05d7e81a.js"><link rel="prefetch" href="/assets/js/85.a6635582.js"><link rel="prefetch" href="/assets/js/86.118fc8a8.js"><link rel="prefetch" href="/assets/js/87.733d1a86.js"><link rel="prefetch" href="/assets/js/89.6af6a61a.js"><link rel="prefetch" href="/assets/js/9.4358d766.js"><link rel="prefetch" href="/assets/js/90.7e1ea04c.js"><link rel="prefetch" href="/assets/js/91.79791a71.js"><link rel="prefetch" href="/assets/js/92.a09dadfb.js"><link rel="prefetch" href="/assets/js/93.3b133700.js"><link rel="prefetch" href="/assets/js/94.e5ca8637.js"><link rel="prefetch" href="/assets/js/95.4a3266ce.js"><link rel="prefetch" href="/assets/js/96.9e341d7c.js"><link rel="prefetch" href="/assets/js/97.337471f7.js"><link rel="prefetch" href="/assets/js/98.cce89f62.js"><link rel="prefetch" href="/assets/js/99.66605a7e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64f7ac41.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">代码重工</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1、jdk-1-6-分水岭">1、JDK 1.6 分水岭</a></li><li><a href="#_2、锁膨胀-重点">2、锁膨胀 [重点]</a><ul><li><a href="#_1无锁">①无锁</a></li><li><a href="#_2偏向锁">②偏向锁</a></li><li><a href="#_3轻量级锁">③轻量级锁</a></li><li><a href="#_4重量级锁">④重量级锁</a></li></ul></li><li><a href="#_3、锁消除-了解">3、锁消除 [了解]</a></li><li><a href="#_4、锁粗化-了解">4、锁粗化 [了解]</a></li><li><a href="#_5、自旋锁">5、自旋锁</a></li><li><a href="#_6、自适应自旋锁">6、自适应自旋锁</a></li></ul></div><p></p> <h1 id="第一节-锁膨胀机制"><a href="#第一节-锁膨胀机制" class="header-anchor">#</a> 第一节 锁膨胀机制</h1> <h2 id="_1、jdk-1-6-分水岭"><a href="#_1、jdk-1-6-分水岭" class="header-anchor">#</a> 1、JDK 1.6 分水岭</h2> <p>在 JDK 1.6 之前，synchronized 的底层工作机制只有『重量级锁』这一种模式。从 JDK 1.6 开始，官方对synchronized 的底层工作机制做了重大调整。</p> <p>为了减少获得锁和释放锁带来的性能消耗，引入了『偏向锁』和『轻量级锁』的概念。升级后锁一共有 4 种状态，级别从低到高依次是：无锁状态、偏向锁状态、轻量级锁状态和重量级锁状态。<span style="color:blue;font-weight:bold;">锁可以升级但<span style="color:red;">不能降级</span>，也称为膨胀过程不可逆</span>。</p> <h2 id="_2、锁膨胀-重点"><a href="#_2、锁膨胀-重点" class="header-anchor">#</a> 2、锁膨胀 [重点]</h2> <h3 id="_1无锁"><a href="#_1无锁" class="header-anchor">#</a> ①无锁</h3> <p>对象（用来作为锁对象的那个）刚创建出来，没有线程来竞争——没有线程准备执行同步代码块。</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h3 id="_2偏向锁"><a href="#_2偏向锁" class="header-anchor">#</a> ②偏向锁</h3> <p><span style="color:blue;font-weight:bold;">只有一个线程访问</span>对象。此时没有必要执行获得锁和释放锁的操作，我们只需要在对象中记录当前偏向的线程的 ID，只要是这个线程来访问对象，则无需获得锁，直接可以开始操作。</p> <p>如果一个线程获得了锁，那么锁就进入偏向模式，此时 Mark Word 的结构也就变为偏向锁结构，当该线程再次请求锁时，无需再做任何同步操作（同步操作就是加锁、解锁操作的总称），即获取锁的过程只需要检查 Mark Word 的锁标记位为偏向锁以及当前线程 ID 等于 Mark Word 的 Thread ID 即可，这样就省去了大量有关锁申请的操作。</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h3 id="_3轻量级锁"><a href="#_3轻量级锁" class="header-anchor">#</a> ③轻量级锁</h3> <p>轻量级锁是由偏向锁升级而来，当存在第二个线程申请同一个锁对象时，偏向锁就会立即升级为轻量级锁。注意这里的第二个线程<span style="color:blue;font-weight:bold;">只是申请锁</span>，<span style="color:blue;font-weight:bold;">不存在</span>两个线程同时<span style="color:blue;font-weight:bold;">竞争</span>锁，可以是一前一后地交替执行同步块。</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h3 id="_4重量级锁"><a href="#_4重量级锁" class="header-anchor">#</a> ④重量级锁</h3> <p>重量级锁是由轻量级锁升级而来。当同一时间有多个线程竞争锁时，锁就会被升级成重量级锁，此时其申请锁带来的开销也就变大。此时各个线程之间<span style="color:blue;font-weight:bold;">存在竞争关系</span>。</p> <p>重量级锁一般用在不追求吞吐量，同步块或者同步方法执行时间较长的场景。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAAFJCAIAAAD/srSoAAAayElEQVR42u2de5gP1R/Hz/56Si4pKmV5UG5FbrGR23bRum2bxINEKnc9RYWwSg+xi6cbuZXaSK2eJOyWVnm0kUK1Kiq0togSK/eVevp97GGMM/Od893dme+c75z364/vM2bP93xnxnnNOZ9zzpyJYSb+++8/vhETE4Od2KnPzhjjbwBoCzQAABoAAA0AYNAAAAYNAGDQAAAGDQBg0AAABg0AYNAAAAYNAGDQAAAGDQBg0AAABg0AYNAAAAYNAGDQQAfmzZvnep59+vQpXbq032fmGtAg+LRp02bjxo1lypRxJbdTp04dPXr0+PHj0ABEE6RB06ZNX3jhBVdyW7FiRVJSEjQAUQY0kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINgg80kAINJJw4caJKlSru5lm/fv3PPvssYqcADaRAAwmkQZkyZYYNG9awYUNXMly8ePHff/8NDZQCGkjgGixfvvzOO+90JcPhw4d/9dVX0EApoIEEaCAADXQEGghAAx2BBgLQQEeggQA00BFoIAANdAQaCEADHYEGAtBAR6CBADTQEWggAA10BBoIQAMdgQYC0EBHoIEANNARaCAADXQEGghAAx2BBgLQQEeggQA00BFoIAANdAQaCEADHYEGAtBAR6CBADTQEWggAA10BBoIQAMdgQYC0EBHoIEANNARaCAADXQEGghAAx0JsAZDhw7NysrasWOHeWdMTExqauqoUaPor7Nnz7YWD2igI0HVIDc3t2bNmrzEm/cbGqxdu5Z/V0gDDXQkqBrYVgVErVq1EhISZs2aFSo3aKAjgdSA7vS0k46hdevW5EPbtm179uzJ/8Q1oOaQOQeqNwxhoIGOBFIDKusDBw6kpg5vGhE///yz+SvWxpIBNNCR4Glgbg7RNn2am0AdOnSgz5UrV4bKDRroSPA0oKrAfO+n7Wuvvdb4J4lBVQQ0AOcRPA0MjKaReSfvJ7VmwgMJBg30JKgaTJ06dd68ebxpRNujR482/3XIkCGhOouggY4EVYOYmBjjBm/G3Ilkmxs08Io77rjD9TxXrVrl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6Ag0OEf16tWpWFOjKFSCffv21a9f/5Zbbrnxxhv379//3HPPkRWhRhV4L1Dv3r0p0qC2VrVq1VasWOHw65Qt1UVpaWl+XwYdgQZnWL9+fcuWLTdt2tS0adNQadLT03v16nX8+HG+CktcXFx8fPz06dNtE1Pg2759exKAtinNyJEjyaIrr7wyVOaUJjU19c8///T7SugINDhDcnLy4sWLt2/f7pBm2bJl1Gj5448/KlWqxM4v6FZuuummhISESZMmsbMDERR7VKhQIVTmP/744/XXX//xxx/ffvvtfl8M7YAGZ2jcuPGtt976/PPPO6Q5duxYgwYNqOlSp06dgoKCN95444svvmjevLltYj5dgppM1CiiO33btm3feuutkh8D8AJocBoq3+XKlQtnNPebb76hEHnDhg1169alpr9zRDt16tRXXnmFQuSkpCSyQrqg3YgRIyjndevW+X09tAManIbaQnSDdw4MIgBpM3v27J07d/p9PbQDGpwmOzubgt09e/ZUrlzZx8N48803+/fvT80tv6+HdkCD06Snp/fu3fvff//19zD46MGff/55xRVX+H1J9AIanIai0ueee27Xrl3+HsYPP/xQr169zZs3N2zY0O9LohfQ4DSvv/768OHDDx065O9hfPnlly1atKDYoEaNGn5fEr2ABqdZuXJlx44djx07VqZMGR8P4/3337/77rspNnCYzQG8ABqchtohjRs33rZtW+3atX08jFmzZj399NMYSI480OA0+/btu+qqq9asWRMfH+/jYYwfP3758uXkpN/XQzugwRnKlSuXkpLy8MMP+3gM99xzz6lTp2zfNw48BRqcoWfPnhQi+zjjnwS45JJLXnzxRXcXgwHhAA3O8Oabb/bp0+evv/669NJLfTkAHh/v3r27SpUqfl8M7YAGZzh48GDFihVJht69e/tyAP379//pp58+++wzv6+EjkCDc3To0KFMmTLvvfde5H/6+PHjNWrUePzxx0ePHu33ZdARaHCOzMzMxMRECg/IB+FPNWvW5A8PCGu4F4nPP/88NTWVWv/W0bHk5OSXX345Ly/PryaZ5kCD87jrrrsoPPj000+F/QsWLBg/fvyRI0cmTpxYjPWLfvvtt6lTp7700kvt2rVbtWqV8Nddu3aRGCkpKSNHjvT7AmgKNDgPPp3BNkI4efIkmTBt2jSqGagdP2DAgHBqhpycnFcKocCDKhP6ojXNkCFDyI0dO3b4ffb6Ag1EHnzwwaysrHXr1lWvXt361x9//PHVV1/lD9NQC+qWW26Jj4+vV6+e+ZGaQ4cObdiwYc2aNVSrUD7169cfUIjtTI133323e/fu8+fPp9/1+9T1BRqIFBQUtG7dmopsdnZ2qDR///03ybCmED73oXz58pUqVaL9+/bt4w8MXHfddWRIp06dkpKSQuXz9ddf02/17dt3zpw5fp+31kADG7Zu3Uqlk+KE119/XZqYivLu3btJBhLgoosuqlRI3bp1pbNEqdJo1apVbGwsVT5+n7HuQAN7MjIy7rzzzieeeIKCAS/y379/P1UC27ZtW7t27dVXX+336eoONAgJVQXUXu/ateuCBQvKli3rYs4UOZADtLFw4cK4uDi/TxRAA0coPOjTp0/FihXJhAYNGriSZ3p6OuWZkJBAeZZkFAK4CDSQQO1+unN/+umnY8aMGTt2bEmey9myZcuUKVMWLVr08MMPz5gxw+8zA+eABmFBEcLkyZMvvPBCkmHEiBFF/frvv/9OArz00ktNmjShHLp37+73CYHzgAbhcujQISrKqampV155ZWJiYufOnenT+WnJ3377LaOQzMzMqlWrUmUyePBgv88D2AANikZubu6SJUuoZFPYQJUDNfErV64cGxvLP0+ePLlnz569e/fS586dO9euXUuecGH69esXExPj9+EDe6BBMaGyTvd4KuhGuc/Pz6f9Zis6duxIDkjf8QF8Bxq4xokTJ+je/7///c/vAwFF5v8bhiO4IYHVxgAAAABJRU5ErkJggg==" alt="images"></p> <h2 id="_3、锁消除-了解"><a href="#_3、锁消除-了解" class="header-anchor">#</a> 3、锁消除 [了解]</h2> <p>消除锁是 JVM 的另外一种锁的优化。在 JIT 编译时，对运行上下文进行扫描，去除不可能存在竞争的锁。比如下面代码的 method01() 和method02() 的执行效率是一样的，因为 objectLock 锁对象是局部变量，每个线程都可以创建属于自己的锁对象，所以事实上并不存在锁的竞争关系。</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h2 id="_4、锁粗化-了解"><a href="#_4、锁粗化-了解" class="header-anchor">#</a> 4、锁粗化 [了解]</h2> <p>锁粗化是虚拟机对另一种极端情况的优化处理，通过扩大锁的范围，避免反复加锁和释放锁。比如下面 method03() 经过锁粗化优化之后就和 method04() 执行效率一样了。</p> <p><img src="/assets/img/img005.bf084c9a.png" alt="images"></p> <h2 id="_5、自旋锁"><a href="#_5、自旋锁" class="header-anchor">#</a> 5、自旋锁</h2> <p>轻量级锁失败后，虚拟机为了避免线程真实地在操作系统层面挂起，还会进行一项称为自旋锁的优化手段。大致相当于：在遇到 synchronized 时，没有拿到锁，但是并不乖乖去阻塞，而是继续执行一些无意义代码。执行完这些代码再看看别人把锁释放没有。如果还是没有释放，那就只好去阻塞了。</p> <ul><li>适合的场景：锁定时间较短，通过自旋有较大几率获得锁。</li> <li>不适合的场景：锁定时间长，自旋操作本身浪费了 CPU 性能。
<ul><li>通俗来说就是：“旋”了半天没等到，白“旋”了。</li></ul></li></ul> <p>自旋代码举例：这例子只是拿常规代码说明一下情况并不能代表底层实际执行效果</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;正常业务功能代码 ……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Runnable 或 Running 状态</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;正常业务功能代码 ……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Runnable 或 Running 状态</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;正常业务功能代码 ……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Runnable 或 Running 状态</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;自旋代码 ……&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Runnable 或 Running 状态</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自旋完成</span>
<span class="token comment">// 尝试获取锁</span>
<span class="token comment">// 获取成功：进入同步代码块执行代码</span>
<span class="token comment">// 获取失败：进入阻塞状态</span>

<span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Demo05Spin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_6、自适应自旋锁"><a href="#_6、自适应自旋锁" class="header-anchor">#</a> 6、自适应自旋锁</h2> <p>这种相当于是对上面自旋锁优化方式的进一步优化，它的自旋的次数不再固定，其自旋的次数由前一次在同一个锁上的自旋时间及锁的拥有者的状态来决定，这就解决了自旋锁带来的缺点。</p> <p><a href="/pro017-JUC/lecture/chapter02/index.html">回目录</a> <a href="/pro017-JUC/lecture/chapter02/verse02.html">下一节</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.159950f8.js" defer></script><script src="/assets/js/3.3b545592.js" defer></script><script src="/assets/js/88.26ec1911.js" defer></script>
  </body>
</html>
