<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码重工</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="代码重工">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.98f1c44a.js" as="script"><link rel="preload" href="/assets/js/3.20041f1c.js" as="script"><link rel="preload" href="/assets/js/20.b57c5d40.js" as="script"><link rel="prefetch" href="/assets/js/10.bbbadaa2.js"><link rel="prefetch" href="/assets/js/100.8594d403.js"><link rel="prefetch" href="/assets/js/101.256d8040.js"><link rel="prefetch" href="/assets/js/102.682644e7.js"><link rel="prefetch" href="/assets/js/103.2246b6dd.js"><link rel="prefetch" href="/assets/js/104.e0b0a493.js"><link rel="prefetch" href="/assets/js/105.efc86f96.js"><link rel="prefetch" href="/assets/js/106.a4a5434b.js"><link rel="prefetch" href="/assets/js/107.4519fd2f.js"><link rel="prefetch" href="/assets/js/108.c5184f86.js"><link rel="prefetch" href="/assets/js/109.7fed5a12.js"><link rel="prefetch" href="/assets/js/11.c0d4e571.js"><link rel="prefetch" href="/assets/js/110.a01fc052.js"><link rel="prefetch" href="/assets/js/111.c0b96a6e.js"><link rel="prefetch" href="/assets/js/112.a66d0163.js"><link rel="prefetch" href="/assets/js/113.1089e092.js"><link rel="prefetch" href="/assets/js/114.3ec47248.js"><link rel="prefetch" href="/assets/js/115.5653f28b.js"><link rel="prefetch" href="/assets/js/116.10ad4275.js"><link rel="prefetch" href="/assets/js/117.3259384c.js"><link rel="prefetch" href="/assets/js/118.068db368.js"><link rel="prefetch" href="/assets/js/119.240f6661.js"><link rel="prefetch" href="/assets/js/12.717cd270.js"><link rel="prefetch" href="/assets/js/120.921302ca.js"><link rel="prefetch" href="/assets/js/121.759a288d.js"><link rel="prefetch" href="/assets/js/122.625bb7ba.js"><link rel="prefetch" href="/assets/js/123.9e42a372.js"><link rel="prefetch" href="/assets/js/124.178ced2c.js"><link rel="prefetch" href="/assets/js/125.75639308.js"><link rel="prefetch" href="/assets/js/126.cc6fc8b9.js"><link rel="prefetch" href="/assets/js/127.d75ed59c.js"><link rel="prefetch" href="/assets/js/128.9dfada54.js"><link rel="prefetch" href="/assets/js/129.df9b4a72.js"><link rel="prefetch" href="/assets/js/13.5ef5500c.js"><link rel="prefetch" href="/assets/js/130.82f19172.js"><link rel="prefetch" href="/assets/js/131.d5e387ab.js"><link rel="prefetch" href="/assets/js/132.3d32bf27.js"><link rel="prefetch" href="/assets/js/133.08dc971f.js"><link rel="prefetch" href="/assets/js/134.2adee755.js"><link rel="prefetch" href="/assets/js/135.acd1ef1d.js"><link rel="prefetch" href="/assets/js/136.a1e21945.js"><link rel="prefetch" href="/assets/js/137.c29a3f83.js"><link rel="prefetch" href="/assets/js/138.d2867a26.js"><link rel="prefetch" href="/assets/js/139.9e5b7e10.js"><link rel="prefetch" href="/assets/js/14.4b633789.js"><link rel="prefetch" href="/assets/js/140.de7661c5.js"><link rel="prefetch" href="/assets/js/141.3c4cb1d1.js"><link rel="prefetch" href="/assets/js/142.e333f6b7.js"><link rel="prefetch" href="/assets/js/143.f9cabc92.js"><link rel="prefetch" href="/assets/js/144.ff58e642.js"><link rel="prefetch" href="/assets/js/145.78a5e8ea.js"><link rel="prefetch" href="/assets/js/146.db6f0da4.js"><link rel="prefetch" href="/assets/js/147.4fe0afb7.js"><link rel="prefetch" href="/assets/js/148.74d64980.js"><link rel="prefetch" href="/assets/js/149.a6224401.js"><link rel="prefetch" href="/assets/js/15.cc12165e.js"><link rel="prefetch" href="/assets/js/150.ac81d576.js"><link rel="prefetch" href="/assets/js/151.d9bd3d6c.js"><link rel="prefetch" href="/assets/js/152.cd0b6414.js"><link rel="prefetch" href="/assets/js/153.3cfd589e.js"><link rel="prefetch" href="/assets/js/154.7c9abd01.js"><link rel="prefetch" href="/assets/js/155.ca5354b4.js"><link rel="prefetch" href="/assets/js/156.e0c88062.js"><link rel="prefetch" href="/assets/js/157.ebeedb2a.js"><link rel="prefetch" href="/assets/js/158.46a79968.js"><link rel="prefetch" href="/assets/js/159.6e1359cc.js"><link rel="prefetch" href="/assets/js/16.93acd7b0.js"><link rel="prefetch" href="/assets/js/160.7636ce21.js"><link rel="prefetch" href="/assets/js/161.9d5f9fb6.js"><link rel="prefetch" href="/assets/js/162.cb5d3f57.js"><link rel="prefetch" href="/assets/js/163.a070e02a.js"><link rel="prefetch" href="/assets/js/164.9c5d3633.js"><link rel="prefetch" href="/assets/js/165.0071eff7.js"><link rel="prefetch" href="/assets/js/166.31340640.js"><link rel="prefetch" href="/assets/js/167.1deb4fc8.js"><link rel="prefetch" href="/assets/js/168.d13f6b30.js"><link rel="prefetch" href="/assets/js/169.25b87424.js"><link rel="prefetch" href="/assets/js/17.00e793dc.js"><link rel="prefetch" href="/assets/js/170.78f6f109.js"><link rel="prefetch" href="/assets/js/171.915490b7.js"><link rel="prefetch" href="/assets/js/172.0585e156.js"><link rel="prefetch" href="/assets/js/173.9c2a844c.js"><link rel="prefetch" href="/assets/js/174.102dcfc3.js"><link rel="prefetch" href="/assets/js/175.91371a82.js"><link rel="prefetch" href="/assets/js/176.66132499.js"><link rel="prefetch" href="/assets/js/177.e7423770.js"><link rel="prefetch" href="/assets/js/178.d372832f.js"><link rel="prefetch" href="/assets/js/179.e253d64a.js"><link rel="prefetch" href="/assets/js/18.678933bf.js"><link rel="prefetch" href="/assets/js/180.55790e2f.js"><link rel="prefetch" href="/assets/js/181.f8d6c410.js"><link rel="prefetch" href="/assets/js/182.b2865c64.js"><link rel="prefetch" href="/assets/js/183.0b45fd53.js"><link rel="prefetch" href="/assets/js/184.2fdfade1.js"><link rel="prefetch" href="/assets/js/185.a72e62d7.js"><link rel="prefetch" href="/assets/js/186.f9e05749.js"><link rel="prefetch" href="/assets/js/187.9f57ef4a.js"><link rel="prefetch" href="/assets/js/188.b7852bc3.js"><link rel="prefetch" href="/assets/js/189.9308c237.js"><link rel="prefetch" href="/assets/js/19.3a9627e1.js"><link rel="prefetch" href="/assets/js/190.e4e7221a.js"><link rel="prefetch" href="/assets/js/191.4dd2a8c3.js"><link rel="prefetch" href="/assets/js/192.117c8f0b.js"><link rel="prefetch" href="/assets/js/193.1136e6ba.js"><link rel="prefetch" href="/assets/js/194.67e33fa9.js"><link rel="prefetch" href="/assets/js/195.b96c5304.js"><link rel="prefetch" href="/assets/js/196.f93f7c12.js"><link rel="prefetch" href="/assets/js/197.25bb640a.js"><link rel="prefetch" href="/assets/js/198.04883421.js"><link rel="prefetch" href="/assets/js/199.797c59fc.js"><link rel="prefetch" href="/assets/js/2.bcbf42c1.js"><link rel="prefetch" href="/assets/js/200.86f0dbca.js"><link rel="prefetch" href="/assets/js/201.ecf49082.js"><link rel="prefetch" href="/assets/js/202.5b55958b.js"><link rel="prefetch" href="/assets/js/203.16564fac.js"><link rel="prefetch" href="/assets/js/204.b40ed088.js"><link rel="prefetch" href="/assets/js/205.7f654eeb.js"><link rel="prefetch" href="/assets/js/206.6220a17a.js"><link rel="prefetch" href="/assets/js/207.4f3ca649.js"><link rel="prefetch" href="/assets/js/208.dc2e76a9.js"><link rel="prefetch" href="/assets/js/209.11f9a0ce.js"><link rel="prefetch" href="/assets/js/21.95e2acf2.js"><link rel="prefetch" href="/assets/js/210.1b896b32.js"><link rel="prefetch" href="/assets/js/211.1edadcee.js"><link rel="prefetch" href="/assets/js/212.c5984846.js"><link rel="prefetch" href="/assets/js/213.032652ec.js"><link rel="prefetch" href="/assets/js/214.f3c05896.js"><link rel="prefetch" href="/assets/js/215.da675e4a.js"><link rel="prefetch" href="/assets/js/216.1aedf106.js"><link rel="prefetch" href="/assets/js/217.214d9a25.js"><link rel="prefetch" href="/assets/js/218.08e67fee.js"><link rel="prefetch" href="/assets/js/219.86fb2412.js"><link rel="prefetch" href="/assets/js/22.7f461c59.js"><link rel="prefetch" href="/assets/js/220.e0a03535.js"><link rel="prefetch" href="/assets/js/221.edd36c3e.js"><link rel="prefetch" href="/assets/js/222.661ff2a0.js"><link rel="prefetch" href="/assets/js/223.efe1bf95.js"><link rel="prefetch" href="/assets/js/224.3bde2e45.js"><link rel="prefetch" href="/assets/js/225.1a0e1104.js"><link rel="prefetch" href="/assets/js/226.0506724b.js"><link rel="prefetch" href="/assets/js/227.d4e90495.js"><link rel="prefetch" href="/assets/js/228.ca598696.js"><link rel="prefetch" href="/assets/js/229.9cfeecec.js"><link rel="prefetch" href="/assets/js/23.4dbfa201.js"><link rel="prefetch" href="/assets/js/230.469fc265.js"><link rel="prefetch" href="/assets/js/231.ccf5d3dd.js"><link rel="prefetch" href="/assets/js/232.739e90f1.js"><link rel="prefetch" href="/assets/js/233.95893b38.js"><link rel="prefetch" href="/assets/js/234.457595a0.js"><link rel="prefetch" href="/assets/js/235.07e51a32.js"><link rel="prefetch" href="/assets/js/236.fccdcc19.js"><link rel="prefetch" href="/assets/js/237.3b4e93c2.js"><link rel="prefetch" href="/assets/js/238.55802892.js"><link rel="prefetch" href="/assets/js/239.744f038b.js"><link rel="prefetch" href="/assets/js/24.b05b54f3.js"><link rel="prefetch" href="/assets/js/240.45ab84eb.js"><link rel="prefetch" href="/assets/js/241.5ef69b1a.js"><link rel="prefetch" href="/assets/js/242.5bf1c30b.js"><link rel="prefetch" href="/assets/js/243.6ac1d0b8.js"><link rel="prefetch" href="/assets/js/244.5636fe9c.js"><link rel="prefetch" href="/assets/js/245.40aa34d9.js"><link rel="prefetch" href="/assets/js/246.62feed53.js"><link rel="prefetch" href="/assets/js/247.a3dea6ff.js"><link rel="prefetch" href="/assets/js/248.47139965.js"><link rel="prefetch" href="/assets/js/249.336aa5ea.js"><link rel="prefetch" href="/assets/js/25.968162a4.js"><link rel="prefetch" href="/assets/js/250.e59ce31c.js"><link rel="prefetch" href="/assets/js/251.4cb34bd9.js"><link rel="prefetch" href="/assets/js/252.eac8311b.js"><link rel="prefetch" href="/assets/js/253.1ed2253f.js"><link rel="prefetch" href="/assets/js/254.12dfc589.js"><link rel="prefetch" href="/assets/js/255.f8e3957f.js"><link rel="prefetch" href="/assets/js/256.2abd7e5c.js"><link rel="prefetch" href="/assets/js/257.caecad50.js"><link rel="prefetch" href="/assets/js/258.b3983c3b.js"><link rel="prefetch" href="/assets/js/259.72945a09.js"><link rel="prefetch" href="/assets/js/26.9cea6103.js"><link rel="prefetch" href="/assets/js/260.c76f29dc.js"><link rel="prefetch" href="/assets/js/261.ff44e58b.js"><link rel="prefetch" href="/assets/js/262.ca645033.js"><link rel="prefetch" href="/assets/js/263.2e19fbd0.js"><link rel="prefetch" href="/assets/js/264.ab9d96bb.js"><link rel="prefetch" href="/assets/js/265.b205e322.js"><link rel="prefetch" href="/assets/js/266.ee441b14.js"><link rel="prefetch" href="/assets/js/267.9f7c3032.js"><link rel="prefetch" href="/assets/js/268.4f333b50.js"><link rel="prefetch" href="/assets/js/269.d6445fe0.js"><link rel="prefetch" href="/assets/js/27.4110b36b.js"><link rel="prefetch" href="/assets/js/270.c4bc24a4.js"><link rel="prefetch" href="/assets/js/271.4d61291e.js"><link rel="prefetch" href="/assets/js/272.63e95dbd.js"><link rel="prefetch" href="/assets/js/273.136d1849.js"><link rel="prefetch" href="/assets/js/274.84f18356.js"><link rel="prefetch" href="/assets/js/275.63d3534e.js"><link rel="prefetch" href="/assets/js/276.1363bd2f.js"><link rel="prefetch" href="/assets/js/277.b2c4bc45.js"><link rel="prefetch" href="/assets/js/278.82e1c3b7.js"><link rel="prefetch" href="/assets/js/279.41565fcf.js"><link rel="prefetch" href="/assets/js/28.3334bc77.js"><link rel="prefetch" href="/assets/js/280.cf034a16.js"><link rel="prefetch" href="/assets/js/281.cd92b8ff.js"><link rel="prefetch" href="/assets/js/282.db399562.js"><link rel="prefetch" href="/assets/js/283.36d48f6d.js"><link rel="prefetch" href="/assets/js/284.21e58fde.js"><link rel="prefetch" href="/assets/js/285.b10c7fdb.js"><link rel="prefetch" href="/assets/js/286.dabb50ae.js"><link rel="prefetch" href="/assets/js/287.55b68daf.js"><link rel="prefetch" href="/assets/js/288.5757de3f.js"><link rel="prefetch" href="/assets/js/289.c3b5e815.js"><link rel="prefetch" href="/assets/js/29.266a69d7.js"><link rel="prefetch" href="/assets/js/290.8b00559f.js"><link rel="prefetch" href="/assets/js/291.e06863ce.js"><link rel="prefetch" href="/assets/js/292.432b079c.js"><link rel="prefetch" href="/assets/js/293.1f8cb663.js"><link rel="prefetch" href="/assets/js/294.f9cb218f.js"><link rel="prefetch" href="/assets/js/295.85d603c7.js"><link rel="prefetch" href="/assets/js/296.95498c64.js"><link rel="prefetch" href="/assets/js/297.ca3f2a35.js"><link rel="prefetch" href="/assets/js/298.b094c093.js"><link rel="prefetch" href="/assets/js/299.cabdd86a.js"><link rel="prefetch" href="/assets/js/30.efd5b848.js"><link rel="prefetch" href="/assets/js/300.bb627397.js"><link rel="prefetch" href="/assets/js/301.547ddf13.js"><link rel="prefetch" href="/assets/js/302.2293ca73.js"><link rel="prefetch" href="/assets/js/303.623b6628.js"><link rel="prefetch" href="/assets/js/304.ee1949ee.js"><link rel="prefetch" href="/assets/js/305.9a9a7665.js"><link rel="prefetch" href="/assets/js/306.381eccce.js"><link rel="prefetch" href="/assets/js/307.ad1ba40e.js"><link rel="prefetch" href="/assets/js/308.352f9bb2.js"><link rel="prefetch" href="/assets/js/309.db503e6c.js"><link rel="prefetch" href="/assets/js/31.ffc1b6f0.js"><link rel="prefetch" href="/assets/js/310.da765ccb.js"><link rel="prefetch" href="/assets/js/311.2f6d8c92.js"><link rel="prefetch" href="/assets/js/312.21580a7b.js"><link rel="prefetch" href="/assets/js/313.f34c8c62.js"><link rel="prefetch" href="/assets/js/314.1c086a1a.js"><link rel="prefetch" href="/assets/js/315.16434c40.js"><link rel="prefetch" href="/assets/js/316.d134a43b.js"><link rel="prefetch" href="/assets/js/317.7b0896d9.js"><link rel="prefetch" href="/assets/js/318.47eedfbb.js"><link rel="prefetch" href="/assets/js/319.854a1a74.js"><link rel="prefetch" href="/assets/js/32.91d6f003.js"><link rel="prefetch" href="/assets/js/320.ea5c7d4d.js"><link rel="prefetch" href="/assets/js/321.381e6ea7.js"><link rel="prefetch" href="/assets/js/322.94b82a40.js"><link rel="prefetch" href="/assets/js/323.2e7f50c5.js"><link rel="prefetch" href="/assets/js/324.7f5bf53c.js"><link rel="prefetch" href="/assets/js/325.04147dd1.js"><link rel="prefetch" href="/assets/js/326.4e272a3f.js"><link rel="prefetch" href="/assets/js/327.a1ccf44f.js"><link rel="prefetch" href="/assets/js/328.ca811892.js"><link rel="prefetch" href="/assets/js/329.b63e0249.js"><link rel="prefetch" href="/assets/js/33.6db545c8.js"><link rel="prefetch" href="/assets/js/330.dddcd4e3.js"><link rel="prefetch" href="/assets/js/331.88338d68.js"><link rel="prefetch" href="/assets/js/332.5c7c4b30.js"><link rel="prefetch" href="/assets/js/333.26613f22.js"><link rel="prefetch" href="/assets/js/334.82dcfcf0.js"><link rel="prefetch" href="/assets/js/335.fd8b69ae.js"><link rel="prefetch" href="/assets/js/336.35c5e15a.js"><link rel="prefetch" href="/assets/js/337.c11e108d.js"><link rel="prefetch" href="/assets/js/338.e95e46ce.js"><link rel="prefetch" href="/assets/js/339.6fb5fc61.js"><link rel="prefetch" href="/assets/js/34.8b014696.js"><link rel="prefetch" href="/assets/js/340.cb68efb0.js"><link rel="prefetch" href="/assets/js/341.92a7454f.js"><link rel="prefetch" href="/assets/js/342.cb1cda0b.js"><link rel="prefetch" href="/assets/js/343.620ef0d1.js"><link rel="prefetch" href="/assets/js/344.cb0b0e8c.js"><link rel="prefetch" href="/assets/js/345.59793a5b.js"><link rel="prefetch" href="/assets/js/346.e89def98.js"><link rel="prefetch" href="/assets/js/347.5fabc74f.js"><link rel="prefetch" href="/assets/js/348.b4118a46.js"><link rel="prefetch" href="/assets/js/349.55ea2def.js"><link rel="prefetch" href="/assets/js/35.50abd55e.js"><link rel="prefetch" href="/assets/js/350.a7696e27.js"><link rel="prefetch" href="/assets/js/351.b25dfe18.js"><link rel="prefetch" href="/assets/js/352.9fb9b6dc.js"><link rel="prefetch" href="/assets/js/353.8141144c.js"><link rel="prefetch" href="/assets/js/354.78058db7.js"><link rel="prefetch" href="/assets/js/355.0152d87d.js"><link rel="prefetch" href="/assets/js/356.729bc929.js"><link rel="prefetch" href="/assets/js/357.9e5b5a04.js"><link rel="prefetch" href="/assets/js/358.e163968d.js"><link rel="prefetch" href="/assets/js/359.6eb489a9.js"><link rel="prefetch" href="/assets/js/36.86047e8a.js"><link rel="prefetch" href="/assets/js/360.56c81092.js"><link rel="prefetch" href="/assets/js/361.6181a25f.js"><link rel="prefetch" href="/assets/js/362.06a963f2.js"><link rel="prefetch" href="/assets/js/363.2ebbb850.js"><link rel="prefetch" href="/assets/js/364.4b1e2337.js"><link rel="prefetch" href="/assets/js/365.7c5d21b9.js"><link rel="prefetch" href="/assets/js/366.866553ea.js"><link rel="prefetch" href="/assets/js/367.3c7b007b.js"><link rel="prefetch" href="/assets/js/368.98b0047e.js"><link rel="prefetch" href="/assets/js/369.a7feed18.js"><link rel="prefetch" href="/assets/js/37.7441f18d.js"><link rel="prefetch" href="/assets/js/370.016471e6.js"><link rel="prefetch" href="/assets/js/371.c14244f3.js"><link rel="prefetch" href="/assets/js/372.0de076b9.js"><link rel="prefetch" href="/assets/js/373.e04cedac.js"><link rel="prefetch" href="/assets/js/374.ed6ee43a.js"><link rel="prefetch" href="/assets/js/375.e573085d.js"><link rel="prefetch" href="/assets/js/376.68b74d8d.js"><link rel="prefetch" href="/assets/js/377.a3a9e392.js"><link rel="prefetch" href="/assets/js/378.fe1756d9.js"><link rel="prefetch" href="/assets/js/379.ac67402e.js"><link rel="prefetch" href="/assets/js/38.a712717a.js"><link rel="prefetch" href="/assets/js/380.960c097b.js"><link rel="prefetch" href="/assets/js/381.6ad0fa5f.js"><link rel="prefetch" href="/assets/js/382.fbe6f35e.js"><link rel="prefetch" href="/assets/js/383.90f57264.js"><link rel="prefetch" href="/assets/js/384.673680e2.js"><link rel="prefetch" href="/assets/js/385.183809d1.js"><link rel="prefetch" href="/assets/js/386.5a5830c0.js"><link rel="prefetch" href="/assets/js/387.e9afedb4.js"><link rel="prefetch" href="/assets/js/388.33837538.js"><link rel="prefetch" href="/assets/js/389.27e5cc64.js"><link rel="prefetch" href="/assets/js/39.926a4c0e.js"><link rel="prefetch" href="/assets/js/390.c00c333b.js"><link rel="prefetch" href="/assets/js/391.d1e559ff.js"><link rel="prefetch" href="/assets/js/392.fc209bf1.js"><link rel="prefetch" href="/assets/js/393.7ab91c33.js"><link rel="prefetch" href="/assets/js/394.501953bc.js"><link rel="prefetch" href="/assets/js/395.0cd6836d.js"><link rel="prefetch" href="/assets/js/396.3e666c5f.js"><link rel="prefetch" href="/assets/js/397.4d1114bd.js"><link rel="prefetch" href="/assets/js/398.9b3bd0ec.js"><link rel="prefetch" href="/assets/js/399.aeec3253.js"><link rel="prefetch" href="/assets/js/4.7baadd93.js"><link rel="prefetch" href="/assets/js/40.240642ec.js"><link rel="prefetch" href="/assets/js/400.34eadc81.js"><link rel="prefetch" href="/assets/js/401.4e5ed27c.js"><link rel="prefetch" href="/assets/js/402.bff0b3cc.js"><link rel="prefetch" href="/assets/js/403.54a2f241.js"><link rel="prefetch" href="/assets/js/404.f6c992cc.js"><link rel="prefetch" href="/assets/js/405.88bf0f9c.js"><link rel="prefetch" href="/assets/js/406.889d39fe.js"><link rel="prefetch" href="/assets/js/407.688f6f8e.js"><link rel="prefetch" href="/assets/js/408.a558dabe.js"><link rel="prefetch" href="/assets/js/409.6e9628b1.js"><link rel="prefetch" href="/assets/js/41.de3687a2.js"><link rel="prefetch" href="/assets/js/410.c704fd81.js"><link rel="prefetch" href="/assets/js/411.6d3e8d64.js"><link rel="prefetch" href="/assets/js/412.2a1e1120.js"><link rel="prefetch" href="/assets/js/413.a9428f5a.js"><link rel="prefetch" href="/assets/js/414.b6b3e886.js"><link rel="prefetch" href="/assets/js/415.0897ed28.js"><link rel="prefetch" href="/assets/js/416.d9567bed.js"><link rel="prefetch" href="/assets/js/417.460279af.js"><link rel="prefetch" href="/assets/js/418.41202ba3.js"><link rel="prefetch" href="/assets/js/419.a9f4f64c.js"><link rel="prefetch" href="/assets/js/42.480a7af5.js"><link rel="prefetch" href="/assets/js/420.ce90445f.js"><link rel="prefetch" href="/assets/js/421.a9e04219.js"><link rel="prefetch" href="/assets/js/422.83544426.js"><link rel="prefetch" href="/assets/js/423.e93c62d7.js"><link rel="prefetch" href="/assets/js/424.10fb0c51.js"><link rel="prefetch" href="/assets/js/425.e129b43d.js"><link rel="prefetch" href="/assets/js/426.f713940b.js"><link rel="prefetch" href="/assets/js/427.8db5b52f.js"><link rel="prefetch" href="/assets/js/428.57b7af4d.js"><link rel="prefetch" href="/assets/js/429.d275797c.js"><link rel="prefetch" href="/assets/js/43.46d6816c.js"><link rel="prefetch" href="/assets/js/430.476a2ac9.js"><link rel="prefetch" href="/assets/js/431.bbd97330.js"><link rel="prefetch" href="/assets/js/432.1ca9f81a.js"><link rel="prefetch" href="/assets/js/433.59383020.js"><link rel="prefetch" href="/assets/js/434.75103d2d.js"><link rel="prefetch" href="/assets/js/435.a56b1f84.js"><link rel="prefetch" href="/assets/js/436.d11e1875.js"><link rel="prefetch" href="/assets/js/437.85c357bd.js"><link rel="prefetch" href="/assets/js/438.0b934486.js"><link rel="prefetch" href="/assets/js/439.11e2d320.js"><link rel="prefetch" href="/assets/js/44.df52e336.js"><link rel="prefetch" href="/assets/js/440.e8d310ca.js"><link rel="prefetch" href="/assets/js/441.062de7a0.js"><link rel="prefetch" href="/assets/js/442.a380a6ba.js"><link rel="prefetch" href="/assets/js/443.ae48feed.js"><link rel="prefetch" href="/assets/js/444.5ed264f1.js"><link rel="prefetch" href="/assets/js/445.4cabecb4.js"><link rel="prefetch" href="/assets/js/446.c46ff220.js"><link rel="prefetch" href="/assets/js/447.9525ed57.js"><link rel="prefetch" href="/assets/js/448.ff0e4b18.js"><link rel="prefetch" href="/assets/js/449.67824340.js"><link rel="prefetch" href="/assets/js/45.8512313e.js"><link rel="prefetch" href="/assets/js/450.0310f74e.js"><link rel="prefetch" href="/assets/js/451.fe8c4f9c.js"><link rel="prefetch" href="/assets/js/452.5de4fa59.js"><link rel="prefetch" href="/assets/js/453.3206a16a.js"><link rel="prefetch" href="/assets/js/454.cc7ff8a7.js"><link rel="prefetch" href="/assets/js/455.e29fbb5d.js"><link rel="prefetch" href="/assets/js/456.10ac46d5.js"><link rel="prefetch" href="/assets/js/457.a12214c4.js"><link rel="prefetch" href="/assets/js/458.7df95eaf.js"><link rel="prefetch" href="/assets/js/459.09a7bd4a.js"><link rel="prefetch" href="/assets/js/46.2c4cff1b.js"><link rel="prefetch" href="/assets/js/460.8248c845.js"><link rel="prefetch" href="/assets/js/461.1b505cdc.js"><link rel="prefetch" href="/assets/js/462.ecc0aff6.js"><link rel="prefetch" href="/assets/js/463.70a39451.js"><link rel="prefetch" href="/assets/js/464.5ffe04ee.js"><link rel="prefetch" href="/assets/js/465.9223b736.js"><link rel="prefetch" href="/assets/js/466.12018fe8.js"><link rel="prefetch" href="/assets/js/467.6d86c040.js"><link rel="prefetch" href="/assets/js/468.56657b24.js"><link rel="prefetch" href="/assets/js/469.f48c68d3.js"><link rel="prefetch" href="/assets/js/47.b81b63d2.js"><link rel="prefetch" href="/assets/js/470.b45031e1.js"><link rel="prefetch" href="/assets/js/471.e8168742.js"><link rel="prefetch" href="/assets/js/472.f1a1fb9c.js"><link rel="prefetch" href="/assets/js/473.c47ad203.js"><link rel="prefetch" href="/assets/js/474.7723d605.js"><link rel="prefetch" href="/assets/js/475.986a74ac.js"><link rel="prefetch" href="/assets/js/476.093a50fb.js"><link rel="prefetch" href="/assets/js/477.16b31e08.js"><link rel="prefetch" href="/assets/js/478.3587e35e.js"><link rel="prefetch" href="/assets/js/479.6c0ddb5a.js"><link rel="prefetch" href="/assets/js/48.688619c3.js"><link rel="prefetch" href="/assets/js/480.95629cd4.js"><link rel="prefetch" href="/assets/js/481.b6e8c8c5.js"><link rel="prefetch" href="/assets/js/482.68eb6c72.js"><link rel="prefetch" href="/assets/js/483.a49a8241.js"><link rel="prefetch" href="/assets/js/484.e57b37f3.js"><link rel="prefetch" href="/assets/js/485.9c9ceb5a.js"><link rel="prefetch" href="/assets/js/486.22f591cb.js"><link rel="prefetch" href="/assets/js/487.3c2a7b7d.js"><link rel="prefetch" href="/assets/js/488.b02581da.js"><link rel="prefetch" href="/assets/js/489.f4e159d6.js"><link rel="prefetch" href="/assets/js/49.9939fce9.js"><link rel="prefetch" href="/assets/js/490.a2eee3f6.js"><link rel="prefetch" href="/assets/js/491.7caf8c95.js"><link rel="prefetch" href="/assets/js/492.fcb0c57d.js"><link rel="prefetch" href="/assets/js/493.7625900d.js"><link rel="prefetch" href="/assets/js/494.c8f36b3d.js"><link rel="prefetch" href="/assets/js/495.11b9af1c.js"><link rel="prefetch" href="/assets/js/496.9c7c77df.js"><link rel="prefetch" href="/assets/js/497.47e4e695.js"><link rel="prefetch" href="/assets/js/498.d6430f70.js"><link rel="prefetch" href="/assets/js/499.6faf1c9b.js"><link rel="prefetch" href="/assets/js/5.0a3a2a22.js"><link rel="prefetch" href="/assets/js/50.705248c1.js"><link rel="prefetch" href="/assets/js/500.928dadd8.js"><link rel="prefetch" href="/assets/js/501.7cede687.js"><link rel="prefetch" href="/assets/js/502.b9692ebc.js"><link rel="prefetch" href="/assets/js/503.44d30ced.js"><link rel="prefetch" href="/assets/js/504.23fafec9.js"><link rel="prefetch" href="/assets/js/505.f2352fa1.js"><link rel="prefetch" href="/assets/js/506.313b8fa9.js"><link rel="prefetch" href="/assets/js/507.34650cd4.js"><link rel="prefetch" href="/assets/js/508.e68171be.js"><link rel="prefetch" href="/assets/js/509.cf8f530d.js"><link rel="prefetch" href="/assets/js/51.c890ce92.js"><link rel="prefetch" href="/assets/js/510.6f521301.js"><link rel="prefetch" href="/assets/js/511.088c86a1.js"><link rel="prefetch" href="/assets/js/512.9a624d19.js"><link rel="prefetch" href="/assets/js/513.22136d9c.js"><link rel="prefetch" href="/assets/js/514.f23a5214.js"><link rel="prefetch" href="/assets/js/515.ef0e3685.js"><link rel="prefetch" href="/assets/js/516.67049b89.js"><link rel="prefetch" href="/assets/js/517.39bd9195.js"><link rel="prefetch" href="/assets/js/518.17bf8333.js"><link rel="prefetch" href="/assets/js/519.0955d329.js"><link rel="prefetch" href="/assets/js/52.c8a94dc5.js"><link rel="prefetch" href="/assets/js/520.97859a67.js"><link rel="prefetch" href="/assets/js/521.c2b43c9a.js"><link rel="prefetch" href="/assets/js/522.2b893868.js"><link rel="prefetch" href="/assets/js/523.4566c663.js"><link rel="prefetch" href="/assets/js/524.9f2b0fa0.js"><link rel="prefetch" href="/assets/js/525.14ad0f75.js"><link rel="prefetch" href="/assets/js/526.c7493a08.js"><link rel="prefetch" href="/assets/js/527.3248a0c9.js"><link rel="prefetch" href="/assets/js/528.9f2a644e.js"><link rel="prefetch" href="/assets/js/529.ff4adf0e.js"><link rel="prefetch" href="/assets/js/53.74855f17.js"><link rel="prefetch" href="/assets/js/530.26d19abb.js"><link rel="prefetch" href="/assets/js/531.f8a328de.js"><link rel="prefetch" href="/assets/js/532.f8d2673b.js"><link rel="prefetch" href="/assets/js/533.d7bfc750.js"><link rel="prefetch" href="/assets/js/534.fcdf040e.js"><link rel="prefetch" href="/assets/js/535.5e4b3a8e.js"><link rel="prefetch" href="/assets/js/536.058e2669.js"><link rel="prefetch" href="/assets/js/537.30425ca1.js"><link rel="prefetch" href="/assets/js/538.87234aa9.js"><link rel="prefetch" href="/assets/js/539.a9bcd913.js"><link rel="prefetch" href="/assets/js/54.5962beaf.js"><link rel="prefetch" href="/assets/js/540.2fb537dc.js"><link rel="prefetch" href="/assets/js/541.27e96f3e.js"><link rel="prefetch" href="/assets/js/542.1a25239f.js"><link rel="prefetch" href="/assets/js/543.0330b4b8.js"><link rel="prefetch" href="/assets/js/544.8a8bcbda.js"><link rel="prefetch" href="/assets/js/545.79d6973d.js"><link rel="prefetch" href="/assets/js/546.e410ae42.js"><link rel="prefetch" href="/assets/js/547.cffa908e.js"><link rel="prefetch" href="/assets/js/548.f9e833ca.js"><link rel="prefetch" href="/assets/js/549.bcbac11d.js"><link rel="prefetch" href="/assets/js/55.73e3fbf3.js"><link rel="prefetch" href="/assets/js/550.d8fdbd6e.js"><link rel="prefetch" href="/assets/js/551.a0d3ab16.js"><link rel="prefetch" href="/assets/js/552.e34e7587.js"><link rel="prefetch" href="/assets/js/553.49db65c6.js"><link rel="prefetch" href="/assets/js/554.8a3ddb4c.js"><link rel="prefetch" href="/assets/js/555.e892fe90.js"><link rel="prefetch" href="/assets/js/556.7a0c21da.js"><link rel="prefetch" href="/assets/js/557.1a0eb946.js"><link rel="prefetch" href="/assets/js/558.2a310b95.js"><link rel="prefetch" href="/assets/js/559.f5abaf61.js"><link rel="prefetch" href="/assets/js/56.3668061e.js"><link rel="prefetch" href="/assets/js/560.946ead9f.js"><link rel="prefetch" href="/assets/js/561.5f2be6b7.js"><link rel="prefetch" href="/assets/js/562.b47975d7.js"><link rel="prefetch" href="/assets/js/563.41e317e1.js"><link rel="prefetch" href="/assets/js/564.057d601b.js"><link rel="prefetch" href="/assets/js/565.7516baf1.js"><link rel="prefetch" href="/assets/js/566.0ac6187e.js"><link rel="prefetch" href="/assets/js/567.a14023cc.js"><link rel="prefetch" href="/assets/js/568.68c449af.js"><link rel="prefetch" href="/assets/js/569.fec55d9c.js"><link rel="prefetch" href="/assets/js/57.d2879ed6.js"><link rel="prefetch" href="/assets/js/570.39081f73.js"><link rel="prefetch" href="/assets/js/571.5e90c59f.js"><link rel="prefetch" href="/assets/js/572.7753851f.js"><link rel="prefetch" href="/assets/js/573.2b85a1ac.js"><link rel="prefetch" href="/assets/js/574.461b53bf.js"><link rel="prefetch" href="/assets/js/575.145dd47b.js"><link rel="prefetch" href="/assets/js/576.b9ca90a6.js"><link rel="prefetch" href="/assets/js/577.644a427c.js"><link rel="prefetch" href="/assets/js/578.af2ffd24.js"><link rel="prefetch" href="/assets/js/579.58cc08f9.js"><link rel="prefetch" href="/assets/js/58.92259d63.js"><link rel="prefetch" href="/assets/js/580.ee71a8e9.js"><link rel="prefetch" href="/assets/js/581.5553b51c.js"><link rel="prefetch" href="/assets/js/582.d9daea17.js"><link rel="prefetch" href="/assets/js/583.ec2cb737.js"><link rel="prefetch" href="/assets/js/584.326538a0.js"><link rel="prefetch" href="/assets/js/585.2901041f.js"><link rel="prefetch" href="/assets/js/586.07633f46.js"><link rel="prefetch" href="/assets/js/587.b6c708c5.js"><link rel="prefetch" href="/assets/js/588.41b6ebd0.js"><link rel="prefetch" href="/assets/js/589.7da88990.js"><link rel="prefetch" href="/assets/js/59.4c654ff4.js"><link rel="prefetch" href="/assets/js/590.c62fee8a.js"><link rel="prefetch" href="/assets/js/591.2682f877.js"><link rel="prefetch" href="/assets/js/592.441e746e.js"><link rel="prefetch" href="/assets/js/593.4d9ed583.js"><link rel="prefetch" href="/assets/js/594.5ce3417b.js"><link rel="prefetch" href="/assets/js/595.e498364b.js"><link rel="prefetch" href="/assets/js/596.7eff4bc5.js"><link rel="prefetch" href="/assets/js/597.8af4fbd7.js"><link rel="prefetch" href="/assets/js/598.84a2ac60.js"><link rel="prefetch" href="/assets/js/599.ec183da0.js"><link rel="prefetch" href="/assets/js/6.be5d9f96.js"><link rel="prefetch" href="/assets/js/60.c8888275.js"><link rel="prefetch" href="/assets/js/600.9402f2a9.js"><link rel="prefetch" href="/assets/js/601.92cb5cba.js"><link rel="prefetch" href="/assets/js/602.20f12b2f.js"><link rel="prefetch" href="/assets/js/603.d710ddd3.js"><link rel="prefetch" href="/assets/js/604.5c0883b8.js"><link rel="prefetch" href="/assets/js/605.de8c0569.js"><link rel="prefetch" href="/assets/js/606.b27f6496.js"><link rel="prefetch" href="/assets/js/607.74b6cf9d.js"><link rel="prefetch" href="/assets/js/608.bdf346d7.js"><link rel="prefetch" href="/assets/js/609.68c9357f.js"><link rel="prefetch" href="/assets/js/61.84c7e4a0.js"><link rel="prefetch" href="/assets/js/610.4a5d502f.js"><link rel="prefetch" href="/assets/js/611.ef3d2d1a.js"><link rel="prefetch" href="/assets/js/612.6b4b4f46.js"><link rel="prefetch" href="/assets/js/613.2923c911.js"><link rel="prefetch" href="/assets/js/614.55e3d7cf.js"><link rel="prefetch" href="/assets/js/615.63a19853.js"><link rel="prefetch" href="/assets/js/616.c6d35f58.js"><link rel="prefetch" href="/assets/js/617.027c9b8e.js"><link rel="prefetch" href="/assets/js/618.744dc055.js"><link rel="prefetch" href="/assets/js/619.472b1437.js"><link rel="prefetch" href="/assets/js/62.bce92d4a.js"><link rel="prefetch" href="/assets/js/620.e216b7eb.js"><link rel="prefetch" href="/assets/js/621.a51552a8.js"><link rel="prefetch" href="/assets/js/622.11e5a2ce.js"><link rel="prefetch" href="/assets/js/63.ee5b2247.js"><link rel="prefetch" href="/assets/js/64.e78c420e.js"><link rel="prefetch" href="/assets/js/65.0ae0d4d5.js"><link rel="prefetch" href="/assets/js/66.25669a57.js"><link rel="prefetch" href="/assets/js/67.c17b0c56.js"><link rel="prefetch" href="/assets/js/68.d7cad2e3.js"><link rel="prefetch" href="/assets/js/69.2d26c12f.js"><link rel="prefetch" href="/assets/js/7.e9d0220e.js"><link rel="prefetch" href="/assets/js/70.3f7279ec.js"><link rel="prefetch" href="/assets/js/71.6ae1a703.js"><link rel="prefetch" href="/assets/js/72.578e82cf.js"><link rel="prefetch" href="/assets/js/73.113f777d.js"><link rel="prefetch" href="/assets/js/74.02ea8cb2.js"><link rel="prefetch" href="/assets/js/75.51ce922f.js"><link rel="prefetch" href="/assets/js/76.5fb1dc6e.js"><link rel="prefetch" href="/assets/js/77.b40ac451.js"><link rel="prefetch" href="/assets/js/78.4795e61e.js"><link rel="prefetch" href="/assets/js/79.f1cd6544.js"><link rel="prefetch" href="/assets/js/8.091881aa.js"><link rel="prefetch" href="/assets/js/80.c975d5bd.js"><link rel="prefetch" href="/assets/js/81.9283b897.js"><link rel="prefetch" href="/assets/js/82.b5156076.js"><link rel="prefetch" href="/assets/js/83.f32aa5f7.js"><link rel="prefetch" href="/assets/js/84.942a9958.js"><link rel="prefetch" href="/assets/js/85.32a6cb85.js"><link rel="prefetch" href="/assets/js/86.8af7451b.js"><link rel="prefetch" href="/assets/js/87.118e9ae7.js"><link rel="prefetch" href="/assets/js/88.d710abdd.js"><link rel="prefetch" href="/assets/js/89.1db3ab5a.js"><link rel="prefetch" href="/assets/js/9.5156edd8.js"><link rel="prefetch" href="/assets/js/90.0725df37.js"><link rel="prefetch" href="/assets/js/91.ac999e34.js"><link rel="prefetch" href="/assets/js/92.d3ab6ce4.js"><link rel="prefetch" href="/assets/js/93.dd44174f.js"><link rel="prefetch" href="/assets/js/94.9daea0a2.js"><link rel="prefetch" href="/assets/js/95.c0658857.js"><link rel="prefetch" href="/assets/js/96.5310721c.js"><link rel="prefetch" href="/assets/js/97.851418c1.js"><link rel="prefetch" href="/assets/js/98.fe2cb7a3.js"><link rel="prefetch" href="/assets/js/99.859cdbcd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">代码重工</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1、取消缓存功能">1、取消缓存功能</a></li><li><a href="#_2、最左原则-重要">2、最左原则 [重要]</a><ul><li><a href="#_1有可能用到索引的子句">①有可能用到索引的子句</a></li><li><a href="#_2最左原则">②最左原则</a></li></ul></li><li><a href="#_3、索引失效的其他情况">3、索引失效的其他情况</a><ul><li><a href="#_1在-where-子句条件中使用函数">①在 where 子句条件中使用函数</a></li><li><a href="#_2范围查询">②范围查询</a></li><li><a href="#_3不等于">③不等于</a></li><li><a href="#_4like">④like</a></li><li><a href="#_5涉及类型转换">⑤涉及类型转换</a></li></ul></li><li><a href="#_4、小练习">4、小练习</a></li><li><a href="#_5、小结">5、小结</a></li></ul></div><p></p> <h1 id="第二节-索引失效"><a href="#第二节-索引失效" class="header-anchor">#</a> 第二节 索引失效</h1> <h2 id="_1、取消缓存功能"><a href="#_1、取消缓存功能" class="header-anchor">#</a> 1、取消缓存功能</h2> <p>为了便于测试，避免 MySQL 内的缓存机制干扰分析结果，我们在分析 SQL 语句时取消 SQL 语句的缓存功能。</p> <p>使用 <span style="color:red;font-weight:bold;">SQL_NO_CACHE</span> 关键字：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当然，实际开发时肯定是不会加的。</p> <h2 id="_2、最左原则-重要"><a href="#_2、最左原则-重要" class="header-anchor">#</a> 2、最左原则 [重要]</h2> <h3 id="_1有可能用到索引的子句"><a href="#_1有可能用到索引的子句" class="header-anchor">#</a> ①有可能用到索引的子句</h3> <p>所有有过滤功能的子句都会将相关字段去和索引尝试匹配：</p> <ul><li>ON 子句</li> <li>WHERE 子句</li> <li>GROUP BY 子句</li> <li>HAVING 子句</li> <li>LIMIT 子句</li></ul> <h3 id="_2最左原则"><a href="#_2最左原则" class="header-anchor">#</a> ②最左原则</h3> <p>简单来说就是：MySQL 在决定是否要应用索引时，会对照 SQL 语句中要过滤的字段的顺序和索引中字段的顺序。那么具体是怎么对照的呢？请看下面的细节：</p> <h4 id="_1-创建索引"><a href="#_1-创建索引" class="header-anchor">#</a> [1]创建索引</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age_deptid_name <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>age<span class="token punctuation">,</span> deptid<span class="token punctuation">,</span> NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>按照这个索引创建方式，索引中字段的顺序是：age、deptid、NAME</p> <h4 id="_2-仅查询-age"><a href="#_2-仅查询-age" class="header-anchor">#</a> [2]仅查询 age</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>key_len 的值为什么是 5 ？</p> <p>因为我们现在用到的索引字段就是 age 这一个字段，int 类型的字段占 4 个字节，可以为空再 +1。所以是 5。</p></div> <h4 id="_3-查询-age-和-deptid"><a href="#_3-查询-age-和-deptid" class="header-anchor">#</a> [3]查询 age 和 deptId</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token operator">and</span> deptid <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <h4 id="_4-查询-age、deptid-和-name"><a href="#_4-查询-age、deptid-和-name" class="header-anchor">#</a> [4]查询 age、deptId 和 name</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token operator">and</span> deptid <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><span style="color:blue;font-weight:bold;">单值索引和复合索引的选择</span></p> <p>在实际开发中，一个数据库表包含多个字段，其中有若干个字段有很大几率出现在 where 或其他有可能触发索引的子句中。那么我们倾向于创建『复合索引』，而不是『单值索引』。</p> <p>因为一个复合索引能够涵盖到其中包含的每个字段；而给每一个字段分别创建单值索引会生成更多的索引表，增加切换、磁盘存储、I/O 等方面的开销。</p></div> <h4 id="_5-查询-deptid、name-和-age"><a href="#_5-查询-deptid、name-和-age" class="header-anchor">#</a> [5]查询 deptId、name 和 age</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span>
  deptid <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abcd'</span>
  <span class="token operator">and</span>  emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmcAAAA5CAIAAAD8yxvoAAAKK0lEQVR42u2dO2gcVxSGZ0uXCW7cOoqJCjcBCeQmRQRRQiCVSqPGyNi4sIM7kdJdiF0Emwg3wqWqQEgckMFpbLAgjYsYRTap5MZYpcvN7rx27vPcuXMfM3f+rxDancfe88+/59zHjDR5+vRpBgAAAAADJqenpx8+fDhz5kzslvQUiAMiAvuBwMByJKiaBBAHRAT2A4GB5UhQNQkgDogI7AcCA8uRoGoSJCPO9Pj+xsrOi2xr//3d9cmkfv/4/lcrO8vcm8JROat3Dh9fW5LtZtOeg5sfb/4zO+P1JTcnTBKH9oPgwIQELOcvaxW4r5rT6cGtXKo/ry+FVMoTI6+aNQc3P8r9j6oZlARSGBgWKVnOedYqQNUkSKZqqkDV7DMppTAwCFKyHKpmHFA1C1A1o5BSCgODICXLhauaB8//bu6xvvb5/uO/pAdvbnzRfJnn3xfibqt5Bc0V3Ftlq2l+SFbIOv/91+8OH1/4ebZf48B65+n0+AE7XR3gYrgSpwyWCHDe4dirXm7tv7+3PlFs5cPXbNXP8ldV88ZRvdPW/um9da7xKv9ZXxTuG1XYI2tMIKvOTBqJ1GpAOLSfV8FBMqRkOYusJWZpMR+6rJpVg+RjzbKh2SKGMrVVbaqLblEtily/XFUO6c5cXfGB46qpCTB/mVW6cQFy4c9fbhzdUCjJbdV7SNqqTLh80mO7XJTmN6r8OjXcqTkzaSRDNQaBpxTmVnCQEilZziJr8fkwbzaX08JVzUwcELANEnNuM2ZuIrGUdbnT9/bw8HD2c2VlRbOP86opDfCT7LUYTjN8rsTymmu3Sk9o0qrmbupjLS9K/Y269t8tRb9SeWa9kQzViE5g+/kTHAyFsVnOImtJhytcOTOqmvXvM71qaZq/M0qpqya3iQtJXGCr3/mSKirtvJPz5s2bR48ezX65fPny+fPnVbs5FEcX4OsH4giP6alVU45S3+i3tvJQpljpFI+V1kjzi1JGd2d5Z2dPPhWv6UNojWSoRlzC28+f4GAQjNByFllLqKmSMW7Qqpkxo6sn3G7aqvmkueDXYIu8jUXKu3fvHj58OAt89vss9itXrpw9e1a6Z8iqyQ2P+FUB7Qqiyfqi66p50OWiVIsc5QHqFVz5mTVGMlQjIlHs51Vw0HPGaTmLrOWsarqaoc34MXumT9b6CcwwuJ6hVQQoG2uqVr+tx50Bxprm1E4olt2brTU5s8ZI5lr1Hx/TZV4FB0MnJctZZK1YY01ds+qt+9nmTIfmPvrp5liTQv7Gms0A2852El0TxdYua5Pmi52GLL4SRZfhBTMiJM+sMVIrrXqO++ky/4KDQZOS5SyyVpyqWTZrTzktxt2kpGpufpLGPcrF4xOObtvrwwwtHyB7s7W4GL5xdIOdzTbdqrcL16pWx3a5KOyq7TH3pTI5s8pIhmpEJN50mRfBQf8Zp+UsslacGdqMX1VSPZUo/dNujcc9hScLxSnp1Q4DCFdr4xZPnigDbCwDZIQ+fKdEs1X6HG0tHfM0p9Aq/bFdLoqwastPpZJnVhmJ1KoPhLefV8FB/xmP5bpkrWhjTT2qGTPDP1LjECf3YZuLEz7AtBn01GsW3H7dGbrgAJZzQoSqqSoe/SwqqJq9ZQx69iqFjUFwAMuReJmh1SD9U0l9FsjrPbTAGo2RUiLkd1PPSAQHsBxJuP+vSa7r9rOoOBSnnwH6QP1QVE63/3g3qntS+vDPA0YlOOi55bzmFkPwX6kJIA6ICOwHAgPLkaBqEkAcEBHYDwQGliNB1SSAOCAisB8IDCxHgqpJAHFARGA/EBhYjgRVkwDigIjAfiAwsBwJqiYBxAERgf1AYGA5ksnJyUnsNgAAAADDYDKdTt++fXvu3LnYLekpEAdEBPYDgYHlSFA1CSAOiAjsBwIDy5GgahJAHBAR2A8EBpYjQdUkgDggIrAfCAwsR4KqSQBxQERgPxAYWI4EVZMA4oCIwH4gMLAcCaomAcQBEYH9QGBgORJ/VfOPq5NvdqsX279Pf/k6dqxWyMX59+6lC98/p8Oai/Dyp6Nntz6NHYcrwkY0Xp1LYL+YEY1SZ1RNEk9VMy+Zwy2VDZC2fEZEnW28OpfAfj4jgv0koGqS+KmaCbmomzgJCeElIldnS0/nEtjPZ0SwnwTWcsyU4YK1Klpu+1oqKmjxUjXzLtrFFEaaSFt+I0LaIoD9fEYE+0mgLKcJNk/8WSpCqJFVzXns+5tHz779LZ+fmMN1IcqZC9mmenOiVZMIndujuVfRK2seI76jhT0xP23EfyzXPrrdph/MH688c+Wjz36suqP1ZkljuePtdTYIhm0VL6VK5/LIH15dmB84e//2q3xHIWhbnSXAfrBfYPvpqyZRGJPqPyhRVc1c+fKKcUIxa5bFvuUrxWh+0MN2lYfk9uA9xe5ViMWkMXNp/rh66dXtal/+c5jX7MdUzZBfMhJ9RNozS33EdqboL5mNznRAjVbxS/BqnfO0la1lm3t72VZ+jip1VUF10FkB7Af7BbaftmoSN6ykNF7SoK6aDWmaWgi6SIRKSbtWaUt4U/pG7rqsXdLSfz4vOPva5JIZfQz5uewb4veW1seVzmqEVumPbWxtHLkoOdki4i46q4D9YL/A9tNUTWKgOZYJWnXVVKht1GEba9UU35PstRiQdxqGmKctqz62UUTEmcXNwjt2actIZxXSNqi7z3zaKo5cvLt4s4vOSmA/2C+w/dRVU9FUx4sSA6Bt1VRNwm5r3TlgnKet1utJFeJiDLcMw06R1VfE6JIp0EdEnHmgaUupM5G2uuisBPaD/QLbT2U5k5Gkk1WJ/uNgrGm500Dw0tl/ub2d7e62mcsgJnZ09393uRqtO/tCm5nNjqbIPKYtnc7tO/vdgf1gv8D2U1jO8BH8lHK/krZV08ggKSnXJm1JZ6qeC7cSZvWChHHiEvt5LdJHh3lCIiL9mQ0WWmin2OncIiQmHWh1JtKWl/sHYT/YL7D9pJYzXrIcxU20raumySB8rFWT8VZ+y9vFWaf+5SZ7E6PVTW7MHY/VJA77qDFxZ5vdvEmriGTHLmwgbSR5J6eNznREys6+TmcqbfmYn4L9YL/A9pNZzvRvvaXzN+G0tK+atTiN17LHOdOsmtInvcSH4ObMzbNUPp1V3wKX8ff07ZquPHBr7vO7z/cXX1TJqgZ7WuKSaVBGRJ3Z7Ik2Zi/9E3VGOhvpqFlYUutMpq1uOkuB/WC/wPYTq6amHPNCpV8x5+B/nhAMQRxJj7nl03heSKnzFAvYzxrYz44hWC4yqJoEAxBHtubQh5vZkLa6A/t1axfs15oBWC42qJoEQxBH7Nn3oa+PtOUA2M8a2M+OIVguMqiaBEHEUT1rlWOUfYSFGKN+fvfPJdsUOG35jSg8sJ81sJ8dKAckqJoEEAdEBPYDgYHlSFA1CSAOiAjsBwIDy5FMTk5OYrcBAAAAGAbzsWbsNgAAAADDAFUTAAAAMOV/+T7X04e1ADoAAAAASUVORK5CYII=" alt="images"></p> <p>看上去索引是生效的，但是很明显顺序不一致，不满足最左原则，本来是不应该生效的：</p> <ul><li>查询顺序：deptId、name、<span style="color:blue;font-weight:bold;">age</span></li> <li>索引顺序：<span style="color:blue;font-weight:bold;">age</span>、deptid、NAME</li></ul> <p>但是为什么索引生效了呢？其实原本是不应该生效的，但是此时是 MySQL 的 SQL 优化器调整了解析树，使查询字段符合了索引顺序，这才让索引生效了。</p> <p>但是尽管优化器能够帮助我们进行调整，但是调整本身也需要付出代价，产生系统开销。所以我们开发时还是要尽量和索引中字段顺序一致。</p> <h4 id="_6-仅查询-deptid"><a href="#_6-仅查询-deptid" class="header-anchor">#</a> [6]仅查询 deptId</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> deptId <span class="token operator">=</span> <span class="token number">5</span>
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">没有生效</span>！</p> <p>但是很奇怪，deptId 这个字段明明是在索引中呀？这是因为本次查询没有满足最左原则。</p> <p>在索引中，age 字段在最左边，现在查询的 deptId 作为第一个查询的字段不是 age，这就违背了<span style="color:blue;font-weight:bold;">最左原则</span>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>为什么 MySQL 会如此执着于『最左』字段？</p> <p>这是因为生成索引所在的 B+Tree 的时候，需要对索引值进行排序。那么如果我们指定的是联合索引，那么将涉及到多个字段的排序。例如：age、deptId、name这三个字段要排序的话，肯定优先根据 age 排序；然后在 age 值有相同数据时对 deptId 排序，以此类推。</p> <p>所以我们在实际查询时，需要首先根据 age 字段在索引 B+Tree 中进行二分法查找。此时如果没有提供 age 字段，那将无法使用索引。</p></div> <h4 id="_7-查询-deptid-和-name"><a href="#_7-查询-deptid-和-name" class="header-anchor">#</a> [7]查询 deptId 和 name</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> deptId <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">and</span> name <span class="token operator">=</span> <span class="token string">&quot;aaa&quot;</span>
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">没有生效</span>！同样是因为违背了<span style="color:blue;font-weight:bold;">最左原则</span>。</p> <h4 id="_8-查询-deptid-和-name-并按-age-排序"><a href="#_8-查询-deptid-和-name-并按-age-排序" class="header-anchor">#</a> [8]查询 deptId 和 name 并按 age 排序</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> deptId <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">and</span> name <span class="token operator">=</span> <span class="token string">&quot;aaa&quot;</span> <span class="token keyword">order</span> <span class="token keyword">by</span> age
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>索引<span style="color:blue;font-weight:bold;">没有生效</span>！这是因为 order by 没有过滤功能，不会触发索引。相当于查询过程中没有 age 字段参与。</p> <h4 id="_9-查询-age-和-name"><a href="#_9-查询-age-和-name" class="header-anchor">#</a> [9]查询 age 和 name</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此时联合索引生效，但是 key_len 字段的值是 5，而不是 68，说明 name 字段并没有按照索引去查询。<span style="color:blue;font-weight:bold;">对 name 字段来说，索引没有生效</span>。</p> <h4 id="_10-结论"><a href="#_10-结论" class="header-anchor">#</a> [10]结论</h4> <p>要遵循最左原则，查询字段中至少要有索引中的最左字段作为过滤条件存在。而且就最左原则本身来说，它要求索引最左字段在查询顺序中也最左。只不过只要最左字段出现，优化器会帮我们调整到查询顺序中的最左。而且还有一个要求是：中间不能断。中间一旦断开，后面的就都无法使用索引了。</p> <p><img src="/assets/img/img010.b26a606e.png" alt="images"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>where 子句部分和最左原则对照，看是否生效的口诀：<span style="color:blue;font-weight:bold;">带头大哥不能死，中间兄弟不能断</span></p></div> <h2 id="_3、索引失效的其他情况"><a href="#_3、索引失效的其他情况" class="header-anchor">#</a> 3、索引失效的其他情况</h2> <h3 id="_1在-where-子句条件中使用函数"><a href="#_1在-where-子句条件中使用函数" class="header-anchor">#</a> ①在 where 子句条件中使用函数</h3> <p>首先删除上例索引：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> idx_age_deptid_name <span class="token keyword">on</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建新索引：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> idx_name <span class="token keyword">on</span> emp<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>分析查询（left 函数表示取 name 字段的前三个字符）：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> <span class="token keyword">left</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>
<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>结论：使用了 left() 函数导致了索引失效。</p> <h3 id="_2范围查询"><a href="#_2范围查询" class="header-anchor">#</a> ②范围查询</h3> <p>首先删除上例索引：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> idx_name <span class="token keyword">on</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建新索引：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age_deptid_name <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>age<span class="token punctuation">,</span> deptid<span class="token punctuation">,</span> NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>分析查询：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>deptId <span class="token operator">&gt;</span> <span class="token number">20</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>分析结果：</p> <p><img src="data:image/png;base64,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" alt="images"></p> <p>看起来仍然是生效的，但是我们再另外创建一个索引，把范围查询对应的 deptId 放在后面：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age_deptid_name_2 <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>age<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> deptid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>把查询顺序也改一下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abc'</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>deptId <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>分析结果：</p> <p><img src="data:image/png;base64,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" alt="images"></p> <p>请大家注意两点变化：</p> <ul><li>变化1：MySQL 会优先选择新创建的索引 idx_age_deptid_name_2</li> <li>变化2：key_len 数值变大了很多。</li></ul> <p>分析：</p> <ul><li>key_len 的计算角度：age 字段贡献了 5，deptId 字段贡献了 5，而 name 字段如果应用了索引，那么它应该贡献 63。但是最终 key_len 是 10，说明索引生效的字段是 age 和 deptId</li> <li>type 的取值角度：range，说明查询的类型是范围查询，在当前 SQL 语句中 deptId 做的就是范围查询</li> <li>解决方案角度：把 deptId 放在后面，三个字段的索引就都生效了。说明范围查询并不是祸害自己，而是祸害后面的查询条件。</li></ul> <p>结论：</p> <ul><li>注意点1：创建索引时应该把容易做范围查询的字段往后放</li> <li>注意点2：实际编写 SQL 语句时，做范围查询的字段参照索引中的顺序，也是往后放</li></ul> <p>进一步的问题：如果范围查询有多个呢？</p> <p>创建索引：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age_deptid_name_3 <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> age<span class="token punctuation">,</span> deptid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行分析：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span>
<span class="token keyword">SELECT</span> SQL_NO_CACHE <span class="token operator">*</span>
<span class="token keyword">FROM</span> emp
<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'abc'</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">30</span>
  <span class="token operator">AND</span> emp<span class="token punctuation">.</span>deptId <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>查看分析结果，发现 key_len 是 68，68 = 63 + 5。说明生效的字段是 name、age，deptId 还是没有生效。这就说明范围查询即使放在后面也只有第一个生效。</p> <h3 id="_3不等于"><a href="#_3不等于" class="header-anchor">#</a> ③不等于</h3> <p>所有不等于操作都会导致索引失效：</p> <ul><li>!=</li> <li>&lt;&gt;</li> <li>not</li></ul> <p>测试的语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 删除上例的索引</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> idx_age_deptid_name <span class="token keyword">on</span> emp<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> idx_age_deptid_name_2 <span class="token keyword">on</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 只针对 name 这一个字段创建一个新的索引</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> idx_name <span class="token keyword">on</span> emp<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 分析对 name 查询的 SQL 语句</span>
<span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">!=</span> <span class="token string">'aaa'</span><span class="token punctuation">;</span>
<span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">&lt;&gt;</span> <span class="token string">'bbb'</span><span class="token punctuation">;</span>
<span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>分析结果：</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h3 id="_4like"><a href="#_4like" class="header-anchor">#</a> ④like</h3> <p>并不是所有 like 查询都会导致索引失效：</p> <ul><li>不会导致索引失效的 like 用法：
<ul><li>不使用 %</li> <li>% 放在中间或后面</li></ul></li> <li>会导致索引失效的 like 用法：% 放在前面</li></ul> <h4 id="_1-情况一-like-条件没有"><a href="#_1-情况一-like-条件没有" class="header-anchor">#</a> [1]情况一：like 条件没有 %</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'aaa'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <h4 id="_2-情况二-like-条件把-放右边"><a href="#_2-情况二-like-条件把-放右边" class="header-anchor">#</a> [2]情况二：like 条件把 % 放右边</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'aaa%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <h4 id="_3-情况三-like-条件把-放中间"><a href="#_3-情况三-like-条件把-放中间" class="header-anchor">#</a> [3]情况三：like 条件把 % 放中间</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'aaa%bbb'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;">生效</span>！</p> <h4 id="_4-情况四-like-条件把-放左边"><a href="#_4-情况四-like-条件把-放左边" class="header-anchor">#</a> [4]情况四：like 条件把 % 放左边</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%bbb'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="images"></p> <p>索引<span style="color:blue;font-weight:bold;"><span style="color:red;">没有</span>生效</span>！</p> <p>当然，左右都有 % 的情况和这里一样。</p> <h3 id="_5涉及类型转换"><a href="#_5涉及类型转换" class="header-anchor">#</a> ⑤涉及类型转换</h3> <p>所谓类型转换就是指：我们给查询条件传入的参数和原本的类型不一致。但是这种情况不是必然会导致索引失效。</p> <ul><li>失效情况举例：让 char 类型的字段和 123 比较</li> <li>有效情况举例：让 int 类型的字段和 '123' 比较</li></ul> <h4 id="_1-失效情况"><a href="#_1-失效情况" class="header-anchor">#</a> [1]失效情况</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span> <span class="token keyword">from</span> emp
<span class="token keyword">where</span> name<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>分析结果：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAA2CAIAAAD1Sy87AAAJr0lEQVR42u2dP2wURxTG50rKRGCLljgWVuwmki2ZwpGJpZg0KSIraZAbZGSHAhCdFYUUdBGkCCAQjUUDcijSAJFMICmChKU0B8Lin1KBMIiUlJfb3bu9+ffezu3Nzq33vl+Bzju7ezPfvvnu7du5o3bv3j0BAACgH9Revny5a9eufnejpLx//x7iABcQKhRQhgcWzIHoAY4gVCigDA8smAPRAxxBqFBAGR5YMEdloqfx7ML85OoDsbj+7txcrZZuf3bhi8nVMW2jcVTM1JnN28sjtt3y9Gfj+IcLj5tnXBnxc8K+4zFUKiZOBZQpbiII7xbcaGyciEX6fWUkpEYFMeAWnLJx/IM48mHBJBUwmoKokjLeJ4KABfNUxoIpYMG+qJLR+KVKysCCQwMLToAFZ1Ilo/FLlZQJYcEb9/+Rm+emP12//af1yIX5z+Q/48n8wNxtKrbjWLu1KdWa40NEImj0+revNm+P/tLcTzow3bnReHZRrccEuAxa9OQWpzXYjAFGn15r7T8X19/9PFcjWvXhM618GattwceepDstrv/385zWeSrycl8UbS4l4SGkOgl15sxAytSqIDyGSqHihKdKyuSYCObE16aYNwtud8WeBbe6KDq9b82Tdm9SB0+sJzGOsbYNWXfWTKoIPFswM8D4T9HWTRugNvzoz/knxwgltVY+eqy9Esblsx7by0WR51JrIklxyZw5M5Ac1ShzqBQnTl+okjI5JoI+xeJuy9MkkAULM1VRu2JOYHm02v1yS9CxngJrc3Oz+e/k5CSzj3cLtg7wI/HcHI48fM2vdc3ZVusJXXol70Yfm/OipHNp+d8TRHpCnpkPJEc1uiJwqBQnjncGTZkcE8GaTskOmW3B6eumUqko8mtFI9qCtSZtMGZRMt3yeZZDdR04Qrx48eLq1avNF4cPH963b1/u6HEXhxvg84tm7ql84LfvrK0Rw7d2FT2CqA6bx1oN1/2itEZ3Zmx1dc1ecWI+kNhAclSjzKFSnDh+GUBlckwEw6D17DucBQsl77uj7cZa8B25SCqxmPkcycrbt2+vXLnSjIzm6+bYjxw5snv3buueIS1YS9z0shdbdXWpyfq24I1eLkq7itc6gK5628/MBJKjGo70JVQKFccXg6lMjongwYJ9FSKEfh8h+JnP36eHwXchghigLQumnhXkzogDZMHupJGQPKSQe+tyZiaQ3LXySxG324WKE4wqKZNjIoTPgrkOpa3rYqGpgLwPX08p9H6KobgsWB5gtzf1GZ9zRGsv9Vz3ArEjncmQfP48UHLVzDMzgdSVVh7xf7tdvDhhqJIyOSZCaAtudWiNvPvTng9SHY1PIq01SVZWeXqwW4ZChD5AddGM+ehg/skxtWjj2soHitarro7t5aKole5n2nRyOTMVSI5qlDlUihPHI4OpTI6JELoQIfRKHLX61fpNWWlZsbGC1ay5TPWQ2vh6kpBjURo5QKnOJTL00T/hmFbreu1UOmXVsNEr/theLopR6dYrBplnpgIpU6tuCR8qhYrjkcFRppeJ0IcsmIe6MXT8mpZHvKyncRcn/ACrTcjvYQYOlR0kDpTpndAWTDlROR0KFlxayqZnqYymVOJAGR7/hQgG69cESyuNKHhFBMgNE0j9wmOoVEwcKMMT6PeCM6vg5XQoj78wUs4BFgG9UjKmt59bDfCgKR9l+EWncopTcmUKDVcX8JPtHGWIHrAjQKhQQBkeWDAHogc4glChgDI8sGAORA9wBKFCAWV4YMEciB7gCEKFAsrwwII5ED3AEYQKBZThgQVzIHqAIwgVCijDE1lwv/sAAAADSmTBe/fu7Xc3SsqrV68gDnABoUIBZXhgwRyIHuAIQoUCyvDAgjkQPcARhAoFlOGBBXMgeoAjCBUKKMMDC+ZA9ABHECoUUIYHFsyB6AGOIFQooAwPLJgD0QMcQahQQBkeWDCHPXqenjswevK+WLrZuHSIO/rW0dqX9bNP/j7xcb/HAQonuNFs3Th9rT7x7emv93ffCmVKoUwCLJgDFgwcCW00b/66eP6PIcpJ+FYoUw5lEggLjtzjshDThoHE9jNBmQ/fuvPoLXpgwQNEaKOJkrntg98tz+zpvhXKlEOZBLsFR+Yhzp6tn1xf0BwEFuwOLHiAyAyVKP16M+sr+8qf6gVPA6EMj9WCYwe+2Ti1dWBU9+DBtuBWCSJm2mqu8h7yXslthXyMuYUkOml0Ifb/FN+bRGhVEPVtO42tI7/fGo0OXEquaXNH5W2zRwUyYY0mSr0e1mrjsyszM3ui9Cud7eLGj9cfiui/zxmSUjPDDIzcrZdUL66GDgfLBKEMj82CWw586VB76ktzcrAtWFaobi/SiM5mda/E6BRLdvW71CNb3hofLJnwraMHtk61z6T0Ir6CYlosrK2JxfgcbRtuXyXlXMkbZRa5gQlpNFuRlTSGZpV5HTnJo6EJUa8ndhI7i0jnvm4UVuPp5YlTSK+BMjwWC04d2GY1sOC2RIYFGxutG2K7E90YsMUZ+RKH1Cod2TF90blKxgWr2hUMhjVUmvP5+sPa0OyKPqET92mMp2agWEtmqqf5kgbfKu/0OoTXQBke04IlB7bMdViwVRbrNstercecQmSvp5AwZNXTYLJ30pGdrZ2NluuFAnY+tFB5s3Xj12v118KecTVn+YW725IBKdZiGIXFeJo+Nf7ND1Sqx7UqvTh/d7vmsCeUKRDDgrUpqE92WLBFJGIbmSs7loBTMi1Yr0CnNd0MC+58IqigFNE1utHEVqLfZbcx7oeVZC4zs/OQ6qW9EMPDB2eXZwp0GijDo1uwfVKqz3dgwT1lwfWlJXH5sujChHkL5soU3WfBIB+WUCHvaI3czUz1pNbknl3OyHpfdsX7IJQJo0yCZsHUvXM6wWHBhEzG2NXHb+kWkVZj3U2YteCnxrncLRhlB2/YQyXxGv2em0/m1NbkDGLYX6oX9C4bymSiWjB966ykXLBgm06yF8YrESaa2W59QV0RkWvtAZ8FK4sr2iUJt0IE1kB4g3zub3pNxjMl6V482XNiol4XslcZ+z/6xLG1ZVtBv58LZXgUCyZyIiPnuq+eQytTkK07Dy16bMOzrPVtj3qks6bP8p3m1r4u8mTVgrWFvdH6M/l9OQtWe22OCDjCrX7VcjuHhVXyktixx8Y3BuIjtmu1eJ9x3TXo1uidRWiTgTI8+I0IDvzIE3AEoUIBZXhgwRyIHuAIQoUCyvDAgjkQPcARhAoFlOGBBXMEiR5qcW4M6rI7BBgNBZThgQVzIHqAIwgVCijDAwvmQPQARxAqFFCG53+S5gHZw/gq0wAAAABJRU5ErkJggg==" alt="images"></p> <h4 id="_2-仍然有效的情况"><a href="#_2-仍然有效的情况" class="header-anchor">#</a> [2]仍然有效的情况</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span>
<span class="token keyword">select</span> sql_no_cache <span class="token operator">*</span>
<span class="token keyword">from</span> emp
<span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>分析结果：</p> <p><img src="data:image/png;base64,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" alt="images"></p> <h2 id="_4、小练习"><a href="#_4、小练习" class="header-anchor">#</a> 4、小练习</h2> <p>假设目前我们有索引的情况是：index(a,b,c)</p> <table><thead><tr><th>Where语句</th> <th>索引是否被使用</th></tr></thead> <tbody><tr><td>where a =  3</td> <td>Y,使用到a</td></tr> <tr><td>where a =  3 and b = 5</td> <td>Y,使用到a，b</td></tr> <tr><td>where a =  3 and b = 5 and c = 4</td> <td>Y,使用到a,b,c</td></tr> <tr><td>where b =  3<br>where b = 3 and c =  4<br>where c =  4</td> <td>N，<span style="color:blue;font-weight:bold;">违背最左原则</span></td></tr> <tr><td>where a =  3 and c = 5</td> <td>使用到a， 但是c不可以，<span style="color:blue;font-weight:bold;">b中间断了</span></td></tr> <tr><td>where a =  3 and b &gt; 4 and c = 5</td> <td>使用到a和b， <span style="color:blue;font-weight:bold;">c不能用在范围之后</span>，c 被 b 断给了</td></tr> <tr><td>where a is  null and b is <span style="color:blue;font-weight:bold;">not</span> null</td> <td>is null 支持索引  但是is not null 不支持,所以 a 可以使用索引,但是 b不可以使用</td></tr> <tr><td>where a  <span style="color:blue;font-weight:bold;">&lt;&gt;</span> 3</td> <td>不能使用索引</td></tr> <tr><td>where  abs(a) =3</td> <td>不能使用索引，因为使用了<span style="color:blue;font-weight:bold;">函数</span></td></tr> <tr><td>where a =  3 and b like 'kk%' and c = 4</td> <td>Y,使用到a,b,c。虽然用到了 like，但是左边是确定的。</td></tr> <tr><td>where a =  3 and b like '%kk' and c = 4</td> <td>Y,只用到a, <span style="color:blue;font-weight:bold;">%不能在最左边</span></td></tr> <tr><td>where a =  3 and b like '%kk%' and c = 4</td> <td>Y,只用到a,<span style="color:blue;font-weight:bold;">%不能在最左边</span></td></tr> <tr><td>where a =  3 and b like 'k%kk%' and c =  4</td> <td>Y,使用到a,b,c</td></tr></tbody></table> <h2 id="_5、小结"><a href="#_5、小结" class="header-anchor">#</a> 5、小结</h2> <ul><li>对于单键索引，尽量选择过滤性更好的索引（例如：手机号，邮件，身份证）。这样更容易过滤掉大量数据，为后面操作减轻负担。</li> <li>在选择组合索引的时候，过滤性最好的字段在索引字段顺序中，位置越靠前越好。这样可以更早过滤掉大量数据。</li> <li>选择组合索引时，尽量包含where中更多字段的索引。</li> <li>组合索引出现范围查询时，尽量把这个字段放在索引次序的最后面</li> <li>尽量避免造成索引失效的情况</li></ul> <p><a href="/pro018-MySQL-high/lecture/chapter07/verse01.html">上一节</a> <a href="/pro018-MySQL-high/lecture/chapter07/index.html">回目录</a> <a href="/pro018-MySQL-high/lecture/chapter07/verse03.html">下一节</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.98f1c44a.js" defer></script><script src="/assets/js/3.20041f1c.js" defer></script><script src="/assets/js/20.b57c5d40.js" defer></script>
  </body>
</html>
